<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Grappling Reference</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Mono:wght@400;500&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #0a0c10;
  --surface: #13161e;
  --surface2: #1a1e28;
  --surface3: #222736;
  --border: #252b3a;
  --accent: #e8ff47;
  --accent2: #ff6b35;
  --accent3: #47c8ff;
  --purple: #a78bfa;
  --green: #34d399;
  --text: #dde1ed;
  --text-muted: #606880;
  --text-dim: #8890a8;
  --learned: #34d399;
  --drilling: #fbbf24;
}

* { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: 'DM Sans', sans-serif;
  min-height: 100vh;
  overscroll-behavior: none;
}

/* HEADER */
header {
  background: var(--surface);
  border-bottom: 1px solid var(--border);
  padding: 16px 20px 12px;
  position: sticky;
  top: 0;
  z-index: 200;
}

.header-top {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}

h1 {
  font-family: 'Bebas Neue', sans-serif;
  font-size: 36px;
  letter-spacing: 3px;
  color: var(--accent);
  line-height: 1;
  flex: 1;
}

.stats-row {
  display: flex;
  gap: 16px;
  align-items: center;
}

.stat {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.stat-num {
  font-family: 'Bebas Neue', sans-serif;
  font-size: 20px;
  color: var(--accent);
  line-height: 1;
}

.stat-label {
  font-family: 'DM Mono', monospace;
  font-size: 9px;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 1px;
}

.progress-bar-wrap {
  flex: 1;
  height: 4px;
  background: var(--surface3);
  border-radius: 2px;
  overflow: hidden;
}

.progress-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--accent), var(--green));
  border-radius: 2px;
  transition: width 0.4s ease;
  width: 0%;
}

/* SEARCH */
.search-wrap {
  position: relative;
}

.search-input {
  width: 100%;
  background: var(--surface2);
  border: 1px solid var(--border);
  color: var(--text);
  padding: 9px 14px 9px 36px;
  font-family: 'DM Mono', monospace;
  font-size: 12px;
  outline: none;
  border-radius: 4px;
  transition: border-color 0.2s;
}

.search-input:focus { border-color: var(--accent); }
.search-input::placeholder { color: var(--text-muted); }

.search-icon {
  position: absolute;
  left: 11px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--text-muted);
  font-size: 14px;
  pointer-events: none;
}

/* FILTER TABS */
.filter-tabs {
  display: flex;
  gap: 6px;
  padding: 10px 20px 0;
  overflow-x: auto;
  scrollbar-width: none;
}
.filter-tabs::-webkit-scrollbar { display: none; }

.tab {
  font-family: 'DM Mono', monospace;
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 1px;
  padding: 5px 12px;
  border: 1px solid var(--border);
  background: transparent;
  color: var(--text-muted);
  cursor: pointer;
  border-radius: 2px;
  white-space: nowrap;
  transition: all 0.15s;
}

.tab:hover { border-color: var(--accent); color: var(--accent); }
.tab.active { background: var(--accent); color: #000; border-color: var(--accent); font-weight: 500; }

/* SECTIONS */
.sections { padding: 16px 20px 80px; display: grid; gap: 12px; }

.section {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 6px;
  overflow: hidden;
}

.section-header {
  padding: 14px 16px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 10px;
  user-select: none;
  transition: background 0.15s;
}

.section-header:hover { background: var(--surface2); }

.section-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

.section-title {
  font-family: 'Bebas Neue', sans-serif;
  font-size: 20px;
  letter-spacing: 2px;
  flex: 1;
}

.section-count {
  font-family: 'DM Mono', monospace;
  font-size: 10px;
  color: var(--text-muted);
}

.section-chevron {
  color: var(--text-muted);
  font-size: 12px;
  transition: transform 0.2s;
}

.section.collapsed .section-chevron { transform: rotate(-90deg); }
.section.collapsed .section-body { display: none; }

.section-body { padding: 4px 0 12px; }

/* TREE */
.tree { list-style: none; }

.tree-item { position: relative; }

.node {
  display: flex;
  align-items: flex-start;
  gap: 6px;
  padding: 3px 16px 3px 0;
  cursor: pointer;
  border-radius: 3px;
  transition: background 0.1s;
  position: relative;
}

.node:hover { background: var(--surface2); }

.node-indent {
  display: flex;
  align-items: flex-start;
  flex-shrink: 0;
}

.node-toggle {
  width: 18px;
  height: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 9px;
  color: var(--text-muted);
  border: 1px solid var(--border);
  border-radius: 2px;
  flex-shrink: 0;
  margin-top: 1px;
  transition: all 0.15s;
}

.node-toggle:hover { border-color: var(--accent3); color: var(--accent3); }
.node-toggle.leaf { border-color: transparent; color: var(--border); font-size: 7px; }

.node-content { flex: 1; display: flex; align-items: flex-start; gap: 6px; min-width: 0; padding-top: 1px; }

.node-label {
  font-size: 13px;
  color: var(--text);
  line-height: 1.45;
  flex: 1;
}

.node-label.has-video { color: var(--accent3); }

.node-actions {
  display: flex;
  align-items: center;
  gap: 4px;
  flex-shrink: 0;
  margin-top: 1px;
}

.btn-video {
  display: inline-flex;
  align-items: center;
  gap: 3px;
  font-family: 'DM Mono', monospace;
  font-size: 9px;
  color: var(--accent2);
  text-decoration: none;
  border: 1px solid var(--accent2);
  padding: 2px 7px;
  border-radius: 2px;
  letter-spacing: 0.5px;
  transition: all 0.15s;
  white-space: nowrap;
}

.btn-live {
  color: var(--green) !important;
  border-color: var(--green) !important;
}
.btn-live:hover { background: var(--green) !important; color: #000 !important; }



.btn-note {
  width: 22px;
  height: 22px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid var(--border);
  border-radius: 2px;
  background: transparent;
  cursor: pointer;
  font-size: 11px;
  color: var(--text-muted);
  transition: all 0.15s;
  flex-shrink: 0;
}

.btn-note:hover { border-color: var(--purple); color: var(--purple); }
.btn-note.has-note { border-color: var(--purple); color: var(--purple); background: rgba(167,139,250,0.1); }

/* Progress pill */
.progress-pill {
  display: inline-flex;
  align-items: center;
  font-family: 'DM Mono', monospace;
  font-size: 9px;
  padding: 2px 7px;
  border-radius: 10px;
  border: 1px solid var(--border);
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.15s;
  white-space: nowrap;
  user-select: none;
}

.progress-pill:hover { border-color: var(--text-dim); color: var(--text-dim); }
.progress-pill.drilling { border-color: var(--drilling); color: var(--drilling); background: rgba(251,191,36,0.1); }
.progress-pill.learned { border-color: var(--learned); color: var(--learned); background: rgba(52,211,153,0.1); }

/* Children */
.children {
  list-style: none;
  border-left: 1px solid var(--border);
  margin-left: 25px;
}

.tree-item.collapsed > .children { display: none; }
.tree-item.collapsed > .node .node-toggle { }

/* NOTE PANEL */
.note-panel {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: var(--surface);
  border-top: 2px solid var(--purple);
  z-index: 300;
  transform: translateY(100%);
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  max-height: 70vh;
  display: flex;
  flex-direction: column;
}

.note-panel.open { transform: translateY(0); }

.note-panel-header {
  padding: 14px 16px 10px;
  display: flex;
  align-items: center;
  gap: 10px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}

.note-panel-title {
  font-family: 'Bebas Neue', sans-serif;
  font-size: 18px;
  letter-spacing: 1px;
  color: var(--purple);
  flex: 1;
}

.note-panel-close {
  background: transparent;
  border: 1px solid var(--border);
  color: var(--text-muted);
  cursor: pointer;
  font-size: 16px;
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 2px;
  transition: all 0.15s;
}

.note-panel-close:hover { border-color: var(--accent2); color: var(--accent2); }

.note-textarea {
  flex: 1;
  background: transparent;
  border: none;
  color: var(--text);
  font-family: 'DM Sans', sans-serif;
  font-size: 14px;
  line-height: 1.6;
  padding: 14px 16px;
  resize: none;
  outline: none;
  overflow-y: auto;
  min-height: 120px;
}

.note-textarea::placeholder { color: var(--text-muted); font-style: italic; }

.note-panel-footer {
  padding: 10px 16px;
  border-top: 1px solid var(--border);
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-shrink: 0;
}

.note-save-btn {
  background: var(--purple);
  color: #000;
  border: none;
  padding: 8px 20px;
  font-family: 'DM Mono', monospace;
  font-size: 11px;
  letter-spacing: 1px;
  text-transform: uppercase;
  cursor: pointer;
  border-radius: 2px;
  font-weight: 500;
  transition: opacity 0.15s;
}

.note-save-btn:hover { opacity: 0.85; }

.note-clear-btn {
  background: transparent;
  border: 1px solid var(--border);
  color: var(--text-muted);
  padding: 8px 16px;
  font-family: 'DM Mono', monospace;
  font-size: 11px;
  letter-spacing: 1px;
  text-transform: uppercase;
  cursor: pointer;
  border-radius: 2px;
  transition: all 0.15s;
}

.note-clear-btn:hover { border-color: var(--accent2); color: var(--accent2); }

/* OVERLAY */
.overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  z-index: 250;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s;
}

.overlay.active { opacity: 1; pointer-events: all; }

/* Search highlight */
.highlight > .node > .node-content > .node-label {
  background: rgba(232,255,71,0.15);
  color: var(--accent);
  border-radius: 2px;
  padding: 0 2px;
}

.hidden { display: none !important; }

/* Scrollbar */
::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }

/* Mobile adjustments */
@media (max-width: 480px) {
  h1 { font-size: 28px; }
  .sections { padding: 12px 12px 80px; }
  .filter-tabs { padding: 10px 12px 0; }
  header { padding: 12px 12px 10px; }
}

.view-tabs {
  display: flex;
  gap: 0;
  border-bottom: 1px solid var(--border);
  background: var(--surface);
  padding: 0 20px;
}

.view-tab {
  font-family: 'DM Mono', monospace;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 1px;
  padding: 12px 20px;
  border: none;
  border-bottom: 2px solid transparent;
  background: transparent;
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.15s;
}

.view-tab:hover { color: var(--text); }
.view-tab.active { color: var(--accent); border-bottom-color: var(--accent); }


.view-in-map-btn {
  font-size: 14px;
  text-decoration: none;
  opacity: 0.4;
  transition: opacity 0.15s;
  padding: 2px 4px;
}
.view-in-map-btn:hover { opacity: 1; }
</style>
</head>
<body>

<header>
  <div class="header-top">
    <h1>Grappling</h1>
    <div class="stats-row">
      <div class="stat">
        <div class="stat-num" id="learnedCount">0</div>
        <div class="stat-label">Learned</div>
      </div>
      <div class="stat">
        <div class="stat-num" id="totalCount">0</div>
        <div class="stat-label">Total</div>
      </div>
      <div class="progress-bar-wrap">
        <div class="progress-bar-fill" id="progressBar"></div>
      </div>
    </div>
  </div>
  <div class="search-wrap">
    <span class="search-icon">âŒ•</span>
    <input class="search-input" type="text" placeholder="Search techniques..." id="searchInput">
  </div>
</header>

<div class="view-tabs">
  <button class="view-tab active" data-view="reference">ðŸ“‹ Reference</button>
  <button class="view-tab" data-view="map">ðŸ—º Mind Map</button>
  <button class="view-tab" data-view="custommap">âœ¦ Custom Map</button>
</div>

<div id="referenceView">
<div class="filter-tabs">
  <button class="tab active" data-filter="all">All</button>
  <button class="tab" data-filter="video">Has Video</button>
  <button class="tab" data-filter="drilling">Drilling</button>
  <button class="tab" data-filter="learned">Learned</button>
</div>
<div style="padding: 6px 20px 0;">
  <button class="tab" id="collapseAllBtn" style="padding: 3px 10px; font-size: 9px;">Collapse All</button>
</div>

<div class="sections" id="sections"></div>

</div>

<div id="mapView" style="display:none; padding: 16px 20px;">
  <div style="position:relative; width:100%; height:700px; overflow:hidden; border: 1px solid #2a3040; border-radius: 6px;">
    <iframe 
      id="mindmapFrame"
      width="250%" 
      height="250%" 
      style="border:none; transform: scale(0.4); transform-origin: 0 0;" 
      src="https://www.mindomo.com/mindmap/grappling-mind-map-065fa85bef6a49538899225dc16e1032" 
      frameborder="0" 
      allowfullscreen>
      <a href="https://www.mindomo.com/mindmap/grappling-mind-map-065fa85bef6a49538899225dc16e1032" target="_blank">View map</a>
    </iframe>
  </div>
  <div style="padding: 10px 0 0; text-align: right;">
    <button onclick="switchToMap()" style="font-family: DM Mono, monospace; font-size: 11px; color: var(--text-muted); background: transparent; text-decoration: none; border: 1px solid var(--border); padding: 5px 12px; border-radius: 2px; letter-spacing: 1px; cursor: pointer;">OPEN FULL MAP â†—</button>
  </div>
</div>

<div id="customMapView" style="display:none;">
  <div id="mapCanvas" style="position:relative; width:100%; height:calc(100vh - 160px); overflow:hidden; background:#0a0c10; cursor:grab;">
    <canvas id="mapBg"></canvas>
    <div id="mapContent" style="position:absolute; top:0; left:0; transform-origin:0 0;"></div>
  </div>
  <div style="position:absolute; bottom:20px; right:20px; display:flex; gap:8px; z-index:50;" id="mapControls">
    <button class="map-ctrl-btn" id="zoomIn">+</button>
    <button class="map-ctrl-btn" id="zoomOut">âˆ’</button>
    <button class="map-ctrl-btn" id="resetView">âŒ‚</button>
  </div>
</div>

<style>
#customMapView { position: relative; }
.map-ctrl-btn {
  width: 36px; height: 36px;
  background: var(--surface2);
  border: 1px solid var(--border);
  color: var(--text);
  font-size: 18px;
  cursor: pointer;
  border-radius: 4px;
  display: flex; align-items: center; justify-content: center;
  transition: all 0.15s;
}
.map-ctrl-btn:hover { border-color: var(--accent); color: var(--accent); }

.map-node {
  position: absolute;
  border-radius: 4px;
  cursor: pointer;
  user-select: none;
  transition: box-shadow 0.15s;
  white-space: nowrap;
}
.map-node:hover { box-shadow: 0 0 0 2px var(--accent); z-index: 10; }
.map-node.root-node {
  background: #1a1e28;
  border: 2px solid var(--accent);
  color: var(--accent);
  font-family: 'Bebas Neue', sans-serif;
  font-size: 22px;
  letter-spacing: 2px;
  padding: 14px 24px;
}
.map-node.section-node {
  background: #1a1e28;
  border: 2px solid;
  font-family: 'Bebas Neue', sans-serif;
  font-size: 14px;
  letter-spacing: 1px;
  padding: 8px 14px;
}
.map-node.child-node {
  background: #13161e;
  border: 1px solid var(--border);
  color: var(--text-dim);
  font-size: 11px;
  font-family: 'DM Mono', monospace;
  padding: 4px 10px;
}
.map-node.child-node:hover { color: var(--text); border-color: var(--accent3); }
.map-node.has-video::after {
  content: ' â–¶';
  color: var(--accent2);
  font-size: 9px;
}
.map-node.collapsed-map > .map-children { display: none; }

svg.map-lines {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  pointer-events: none;
  overflow: visible;
}
</style>


<!-- CUSTOM MAP TAB -->
<div id="customMapView" style="display:none; position:relative; width:100%; height:calc(100vh - 160px); background:#080a0e; overflow:hidden;">
  
  <!-- Controls -->
  <div style="position:absolute; top:12px; right:12px; z-index:100; display:flex; gap:6px;">
    <button class="mctrl" id="cmZoomIn">+</button>
    <button class="mctrl" id="cmZoomOut">âˆ’</button>
    <button class="mctrl" id="cmReset" style="font-size:11px; width:auto; padding:0 10px; letter-spacing:1px;">RESET</button>
  </div>

  <!-- Hint -->
  <div style="position:absolute; bottom:12px; left:12px; z-index:100; font-family:'DM Mono',monospace; font-size:10px; color:#404860; letter-spacing:1px;">DRAG TO PAN Â· SCROLL TO ZOOM Â· CLICK NODE TO OPEN IN REFERENCE</div>

  <!-- SVG Canvas -->
  <svg id="cmSvg" style="position:absolute;top:0;left:0;width:100%;height:100%;overflow:visible;"></svg>
</div>

<style>
.mctrl {
  width:32px; height:32px;
  background:#13161e;
  border:1px solid #252b3a;
  color:#8890a8;
  font-size:18px;
  cursor:pointer;
  border-radius:3px;
  display:flex; align-items:center; justify-content:center;
  transition:all 0.15s;
  font-family:'DM Mono',monospace;
}
.mctrl:hover { border-color:#e8ff47; color:#e8ff47; }
</style>

<div class="overlay" id="overlay"></div>

<div class="note-panel" id="notePanel">
  <div class="note-panel-header">
    <div class="note-panel-title" id="notePanelTitle">Notes</div>
    <button class="note-panel-close" id="notePanelClose">âœ•</button>
  </div>
  <textarea class="note-textarea" id="noteTextarea" placeholder="Add your notes, cues, details, game plan..."></textarea>
  <div class="note-panel-footer">
    <button class="note-clear-btn" id="noteClearBtn">Clear</button>
    <button class="note-save-btn" id="noteSaveBtn">Save Note</button>
  </div>
</div>

<script>
// â”€â”€â”€ DATA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const SECTIONS = [
  {
    "title": "Wrestling forBrazillian Jiu Jitsu",
    "color": "#e8ff47",
    "nodes": [
      {
        "t": "- Collar Tie",
        "c": [
          {
            "t": "Entries",
            "v": "https://youtu.be/Ye-Jvn023XI",
            "c": [
              {
                "t": "Outside tie",
                "v": "https://youtu.be/Ye-Jvn023XI"
              },
              {
                "t": "Collar tie",
                "v": "https://youtu.be/Kf0wQ00FPBg"
              }
            ]
          },
          {
            "t": "Offence",
            "c": [
              {
                "t": "Brush by",
                "v": "https://youtu.be/oejTa6J72gE",
                "n": "Most effective when opponent is heavy on collar tie",
                "c": [
                  {
                    "t": "- Disengaging",
                    "v": "https://youtu.be/oejTa6J72gE"
                  },
                  {
                    "t": "- Rear body lock",
                    "v": "https://youtu.be/oXuG3DJBMEE"
                  },
                  {
                    "t": "- Snatch head inside single",
                    "v": "https://youtu.be/B6jTl90lucM"
                  },
                  {
                    "t": "Snatch head outside single",
                    "v": "https://youtu.be/WtUX-OiWYkU"
                  }
                ]
              },
              {
                "t": "-Throw by",
                "v": "https://youtu.be/1wOwMfPHMDs",
                "c": [
                  {
                    "t": "Head to head",
                    "v": "https://youtu.be/1wOwMfPHMDs"
                  },
                  {
                    "t": "Head to shoulder",
                    "v": "https://youtu.be/m42WTwg3Feo"
                  },
                  {
                    "t": "Outside tie",
                    "v": "https://youtu.be/ZLbj39rn6pU"
                  }
                ]
              },
              {
                "t": "Snap downs",
                "v": "https://youtu.be/WZ--OY1yQXU",
                "c": [
                  {
                    "t": "Collar Tie and Inside Tie Snap Down",
                    "v": "https://youtu.be/WZ--OY1yQXU"
                  },
                  {
                    "t": "Overtie snap",
                    "v": "https://youtu.be/NlIBlkV5PVY"
                  },
                  {
                    "t": "Brush by snap",
                    "v": "https://youtu.be/QE8PS6puob0"
                  }
                ]
              },
              {
                "t": "- 2 on 1",
                "c": [
                  {
                    "t": "- Offence",
                    "v": "https://youtu.be/r0-5x2mBL84",
                    "c": [
                      {
                        "t": "- Climb to back",
                        "v": "https://youtu.be/r0-5x2mBL84"
                      },
                      {
                        "t": "- Snatch single",
                        "v": "https://youtu.be/cdQakEraYKE"
                      },
                      {
                        "t": "- ankle pick",
                        "v": "https://youtu.be/6RapDAy2HQQ"
                      },
                      {
                        "t": "- front headlock",
                        "v": "https://youtu.be/DzxwkbNuUBw"
                      }
                    ]
                  },
                  {
                    "t": "- Defence",
                    "c": [
                      {
                        "t": "Framing on head"
                      },
                      {
                        "t": "Pulling far elbow",
                        "c": [
                          {
                            "t": "Underhook"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "t": "- Wrestling hand fighting positions",
        "c": [
          {
            "t": "- Inside Tie",
            "c": [
              {
                "t": "- [Inside Tie to Sweep Single]"
              }
            ]
          },
          {
            "t": "- Over/Under",
            "c": [
              {
                "t": "- Arm drag"
              },
              {
                "t": "- Sweep single"
              },
              {
                "t": "- Snatch single"
              },
              {
                "t": "- Inside leg trip"
              },
              {
                "t": "- Inside leg trip to scissor takedown"
              },
              {
                "t": "- Knee tap"
              }
            ]
          },
          {
            "t": "- Underhook",
            "c": [
              {
                "t": "- Head inside double"
              },
              {
                "t": "- run the pipe"
              },
              {
                "t": "- foot lift"
              },
              {
                "t": "- Side bodylock",
                "c": [
                  {
                    "t": "- Front side uchimata"
                  },
                  {
                    "t": "- Lift and dump"
                  }
                ]
              },
              {
                "t": "- Rear bodylock throwby",
                "c": [
                  {
                    "t": "- Mat return"
                  },
                  {
                    "t": "- Cran ride entry",
                    "c": [
                      {
                        "t": "- Back take"
                      },
                      {
                        "t": "- Knee staple"
                      }
                    ]
                  },
                  {
                    "t": "- Lift and dump"
                  }
                ]
              },
              {
                "t": "- [Snatch head inside Single]"
              },
              {
                "t": "- Knee tap"
              },
              {
                "t": "- Front headlock"
              },
              {
                "t": "- Snatch head outside sngle"
              },
              {
                "t": "- head inside single"
              },
              {
                "t": "- head outside single"
              }
            ]
          },
          {
            "t": "- Outside tie",
            "c": [
              {
                "t": "- [Knee Pull Sweep Single]"
              },
              {
                "t": "- throw by"
              },
              {
                "t": "- collar tie throw by"
              },
              {
                "t": "- head inside single"
              },
              {
                "t": "- double leg"
              },
              {
                "t": "- brush by"
              },
              {
                "t": "- 2 on 1"
              }
            ]
          }
        ]
      },
      {
        "t": "- Rear Bodylock",
        "c": [
          {
            "t": "- Turtle Rear Bodylock",
            "c": [
              {
                "t": "- Spiral ride",
                "c": [
                  {
                    "t": "- Near side hook",
                    "c": [
                      {
                        "t": "- Far side roll",
                        "c": [
                          {
                            "t": "- Hip pinch",
                            "c": [
                              {
                                "t": "- Back take"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "t": "- Far side hook",
                    "c": [
                      {
                        "t": "- Second hook",
                        "c": [
                          {
                            "t": "- Back tke"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "t": "- Opponent rolls far side",
                    "c": [
                      {
                        "t": "- Head arm choke"
                      }
                    ]
                  }
                ]
              },
              {
                "t": "- Seatbelt",
                "c": [
                  {
                    "t": "- Rolling backtake",
                    "c": [
                      {
                        "t": "- Seated rear bodylock",
                        "c": [
                          {
                            "t": "- Back take"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "t": "- Hooks in",
                    "c": [
                      {
                        "t": "- Backtake"
                      }
                    ]
                  }
                ]
              },
              {
                "t": "- Body lock",
                "c": [
                  {
                    "t": "- Knee wedge hook in",
                    "c": [
                      {
                        "t": "- Far side roll",
                        "c": [
                          {
                            "t": "- Hip pinch",
                            "c": [
                              {
                                "t": "- Backtake"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "t": "- Crab hook",
                    "c": [
                      {
                        "t": "- Seated rear body lock",
                        "c": [
                          {
                            "t": "- Back take"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "t": "- Tripod Rear Bodylock",
            "c": [
              {
                "t": "- Throwing hooks in",
                "c": [
                  {
                    "t": "- Weight on hands",
                    "c": [
                      {
                        "t": "- Half nelson",
                        "c": [
                          {
                            "t": "- Backtake"
                          }
                        ]
                      },
                      {
                        "t": "- 2 on 1",
                        "c": [
                          {
                            "t": "- Back take"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "t": "- Weight on feet",
                    "c": [
                      {
                        "t": "- Rear naked choke"
                      },
                      {
                        "t": "- Underhooking knee",
                        "c": [
                          {
                            "t": "- Suloev stretch"
                          }
                        ]
                      },
                      {
                        "t": "- Half nelson",
                        "c": [
                          {
                            "t": "- Shoulder stretch"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "t": "- Elbow in thigh takedown",
                "c": [
                  {
                    "t": "- Turtle Rear bodylock"
                  }
                ]
              },
              {
                "t": "- Feet behind heels",
                "c": [
                  {
                    "t": "- Crab ride"
                  }
                ]
              }
            ]
          },
          {
            "t": "- Standing Rear Bodylock",
            "c": [
              {
                "t": "- Defence",
                "c": [
                  {
                    "t": "- Grip Breaks",
                    "c": [
                      {
                        "t": "- [Grip Break 1]"
                      },
                      {
                        "t": "- [Grip Break 2]"
                      },
                      {
                        "t": "- [Grip Break 3 ]"
                      }
                    ]
                  },
                  {
                    "t": "- Counters",
                    "c": [
                      {
                        "t": "- [Uchi Mata Counter Front Headlock]"
                      },
                      {
                        "t": "- [Uchi Mata Counter Ankle Pick]"
                      },
                      {
                        "t": "- [Uchi Mata Throw Counter ]"
                      },
                      {
                        "t": "- [Chin Push Counter to Front Bodylock]"
                      },
                      {
                        "t": "- [Inside Leg Trip Counter to Front Bodylock]"
                      },
                      {
                        "t": "- [Lift and Sweep Counter to Side Bodylock]"
                      }
                    ]
                  }
                ]
              },
              {
                "t": "- Offence",
                "c": [
                  {
                    "t": "- [Mat return]"
                  },
                  {
                    "t": "- [Front Side Uchi Mata from Side Bodylock]"
                  },
                  {
                    "t": "- [Lower Back Crunch from Front Bodylock]"
                  },
                  {
                    "t": "- Crab Ride Entry"
                  }
                ]
              },
              {
                "t": "- c"
              }
            ]
          }
        ]
      },
      {
        "t": "- Head Inside Single",
        "c": [
          {
            "t": "- Offence",
            "c": [
              {
                "t": "- [Foot Lift Takedown]"
              },
              {
                "t": "- Shin Whizzer",
                "c": [
                  {
                    "t": "- [Limp Arm Counter to Shin Whizzer]"
                  },
                  {
                    "t": "- [Running the Pipe Counter to Shin Whizzer]"
                  },
                  {
                    "t": "- [Head Inside Double Leg Counter to Shin Whizzer]"
                  },
                  {
                    "t": "- [Collar Tie Ankle Tap Counter to Shin Whizzer]"
                  }
                ]
              },
              {
                "t": "- Tripod Defence",
                "c": [
                  {
                    "t": "- [Rear Body Lock counter to Tripod Defence]"
                  }
                ]
              },
              {
                "t": "- Near Side Block",
                "c": [
                  {
                    "t": "- [Knock Over Rear Bodylock counter to Near Side Block Tripod]"
                  }
                ]
              },
              {
                "t": "- Iranian",
                "c": [
                  {
                    "t": "- [Iranian counter to Sprawl]"
                  },
                  {
                    "t": "- [Iranian to Rear Bodylock counter to Sprawl]"
                  }
                ]
              },
              {
                "t": "- Sprawl",
                "c": [
                  {
                    "t": "- [Shelfing the Leg counter to Sprawl]"
                  },
                  {
                    "t": "- [Shelfing leg through Grounded Shin Whizzer]"
                  },
                  {
                    "t": "- [Cut Back Single Leg counter to Sprawl]"
                  }
                ]
              }
            ]
          },
          {
            "t": "- Defence",
            "c": [
              {
                "t": "- Near Side Block",
                "c": [
                  {
                    "t": "- [Tripod Defence Near Side Block ]"
                  },
                  {
                    "t": "- Bail out"
                  }
                ]
              },
              {
                "t": "- Shin Whizzer",
                "c": [
                  {
                    "t": "- [Shin Whizzer Front Headlock Counter]"
                  },
                  {
                    "t": "- [Grip Break Defence from Shin Whizzer]"
                  }
                ]
              },
              {
                "t": "- Tripod Defence",
                "c": [
                  {
                    "t": "- [Inside Switch Tripod Defence]"
                  },
                  {
                    "t": "- Bail out"
                  }
                ]
              },
              {
                "t": "- Iranian",
                "c": [
                  {
                    "t": "- [Near Side Block counter to Iranian]"
                  },
                  {
                    "t": "- Bail out"
                  }
                ]
              },
              {
                "t": "- Sprawl",
                "c": [
                  {
                    "t": "- Grounded Shin Whizzer"
                  },
                  {
                    "t": "- [How to Sprawl]"
                  },
                  {
                    "t": "- [Sprawl to Belly Whizzer]"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "t": "- Head Outside Single",
        "c": [
          {
            "t": "- Running the pipe"
          },
          {
            "t": "- Double leg",
            "c": [
              {
                "t": "- Hands locked"
              },
              {
                "t": "- Split grip",
                "c": [
                  {
                    "t": "- complete double"
                  },
                  {
                    "t": "- Cut to rear body lock",
                    "c": [
                      {
                        "t": "- tripod breakdown"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "t": "-Crackdown"
          }
        ]
      },
      {
        "t": "- Double Leg"
      },
      {
        "t": "- Grounded 50/50"
      }
    ]
  },
  {
    "title": "Guard Passing",
    "color": "#ff6b35",
    "nodes": [
      {
        "t": "Outside Camping",
        "c": [
          {
            "t": "- J point",
            "v": "https://youtu.be/YxIJBbf55a0",
            "c": [
              {
                "t": "- Entries",
                "v": "https://youtu.be/8toccngMCZg",
                "c": [
                  {
                    "t": "Seated guard",
                    "v": "https://youtu.be/5-jZLnq4Ak8",
                    "c": [
                      {
                        "t": "Hip post",
                        "v": "https://youtu.be/5-jZLnq4Ak8"
                      },
                      {
                        "t": "Collar tie",
                        "v": "https://youtu.be/ZbmUQD0lIAs"
                      }
                    ]
                  },
                  {
                    "t": "Supine guard",
                    "v": "https://youtu.be/8toccngMCZg"
                  }
                ]
              },
              {
                "t": "- Maintaing Camping Control points",
                "v": "https://youtu.be/YxIJBbf55a0"
              },
              {
                "t": "- Passes",
                "v": "https://youtu.be/UZt7aEEds7w",
                "c": [
                  {
                    "t": "Toerando",
                    "v": "https://youtu.be/UZt7aEEds7w"
                  },
                  {
                    "t": "Leg drag",
                    "v": "https://youtu.be/OYfI4G1T4Lg"
                  },
                  {
                    "t": "North South",
                    "v": "https://youtu.be/Vy-66UJAySQ"
                  },
                  {
                    "t": "Sprawl",
                    "v": "https://youtu.be/UtSsoK-66Mc"
                  }
                ]
              },
              {
                "t": "-Preventing andcountering defences",
                "v": "https://youtu.be/K8s4BNprDLM",
                "c": [
                  {
                    "t": "Lasso",
                    "v": "https://youtu.be/kQ7gqbS78cI",
                    "c": [
                      {
                        "t": "Transition opposite side",
                        "v": "https://youtu.be/F4t5ba7q7Gk",
                        "c": [
                          {
                            "t": "Bicep curl",
                            "v": "https://youtu.be/F4t5ba7q7Gk"
                          },
                          {
                            "t": "Bicep ride",
                            "v": "https://youtu.be/j1Wscyup89w"
                          },
                          {
                            "t": "C grip",
                            "v": "https://youtu.be/U2Vy92unNgE"
                          },
                          {
                            "t": "Forearm pressure"
                          }
                        ]
                      },
                      {
                        "t": "Back swim",
                        "v": "https://youtu.be/kQ7gqbS78cI"
                      },
                      {
                        "t": "Stripping lasso",
                        "v": "https://youtu.be/GdsHijqF0nE"
                      }
                    ]
                  },
                  {
                    "t": "Deep Lasso",
                    "v": "https://youtu.be/K8s4BNprDLM"
                  },
                  {
                    "t": "Bottom leg reguarding",
                    "v": "https://youtu.be/QkHNNI6OBJQ",
                    "c": [
                      {
                        "t": "Reverse de la riva",
                        "v": "https://youtu.be/QkHNNI6OBJQ"
                      },
                      {
                        "t": "K Guard",
                        "v": "https://youtu.be/4hngRqXbdd0"
                      }
                    ]
                  },
                  {
                    "t": "Arm Frames",
                    "v": "https://youtu.be/_i4wJYP-ufY"
                  },
                  {
                    "t": "X guard",
                    "v": "https://youtu.be/kOeZo7YOtEg"
                  },
                  {
                    "t": "Bringing far leg under arm",
                    "v": "https://youtu.be/cf0JTjYqLaY",
                    "c": [
                      {
                        "t": "Good elbow positioning",
                        "v": "https://youtu.be/cf0JTjYqLaY"
                      },
                      {
                        "t": "Smash pass",
                        "v": "https://youtu.be/b030JiTk6n0"
                      }
                    ]
                  },
                  {
                    "t": "Foot shoulder frame",
                    "v": "https://youtu.be/bTdaK2nOD8M"
                  },
                  {
                    "t": "Far shoulder clamp",
                    "v": "https://youtu.be/gxeob3A3OzU"
                  },
                  {
                    "t": "Elevated hips",
                    "v": "https://youtu.be/zAcqkPKfD6k"
                  }
                ]
              }
            ]
          },
          {
            "t": "- Supine Guard Passing",
            "v": "https://youtu.be/AxZjQX_zAmg",
            "c": [
              {
                "t": "Entries",
                "v": "https://youtu.be/WuqJwZVi1fQ",
                "c": [
                  {
                    "t": "- J point"
                  },
                  {
                    "t": "- Bullfighter",
                    "v": "https://youtu.be/WuqJwZVi1fQ"
                  }
                ]
              },
              {
                "t": "Maintaing camping control points",
                "v": "https://youtu.be/AxZjQX_zAmg"
              },
              {
                "t": "Passes",
                "v": "https://youtu.be/jfVGYxM8DWM",
                "c": [
                  {
                    "t": "Toreando",
                    "v": "https://youtu.be/jfVGYxM8DWM"
                  },
                  {
                    "t": "Head in pocket",
                    "v": "https://youtu.be/BTDNCkCDVZk"
                  },
                  {
                    "t": "Cross control",
                    "v": "https://youtu.be/zWjF2k9YpdQ"
                  },
                  {
                    "t": "Scoop grip",
                    "v": "https://youtu.be/fuwhG1nlgdE"
                  }
                ]
              },
              {
                "t": "Preventing and counter defences",
                "c": [
                  {
                    "t": "Coil",
                    "v": "https://youtu.be/_K7PVS2V5J0",
                    "c": [
                      {
                        "t": "Duck under pass",
                        "v": "https://youtu.be/_K7PVS2V5J0"
                      },
                      {
                        "t": "Clearing early coils",
                        "v": "https://youtu.be/-Q0Az-RU2dI"
                      },
                      {
                        "t": "Back step",
                        "v": "https://youtu.be/nDmdipl_ukQ"
                      }
                    ]
                  },
                  {
                    "t": "Frames",
                    "v": "https://youtu.be/ufTLXamMOok",
                    "c": [
                      {
                        "t": "Shimmying body",
                        "v": "https://youtu.be/ufTLXamMOok"
                      },
                      {
                        "t": "Cross control pass",
                        "v": "https://youtu.be/Esi57ptb-gY"
                      },
                      {
                        "t": "Head in pocket pass",
                        "v": "https://youtu.be/sJEs3bd-fSc"
                      }
                    ]
                  },
                  {
                    "t": "K Guard",
                    "v": "https://youtu.be/AwH7GoN-0YE",
                    "c": [
                      {
                        "t": "Single under pass",
                        "v": "https://youtu.be/AwH7GoN-0YE"
                      }
                    ]
                  },
                  {
                    "t": "Knees to chest",
                    "v": "https://youtu.be/WMT0Cz-PBo0",
                    "c": [
                      {
                        "t": "scoop grip",
                        "v": "https://youtu.be/WMT0Cz-PBo0"
                      },
                      {
                        "t": "Cross control",
                        "v": "https://youtu.be/9xvQoSS68SE"
                      }
                    ]
                  },
                  {
                    "t": "Inverting",
                    "c": [
                      {
                        "t": "Diving crab ride"
                      },
                      {
                        "t": "Head in belly"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "t": "- Seated Guard Passing",
        "c": [
          {
            "t": "- Cross Grip",
            "c": [
              {
                "t": "- Collar tie",
                "c": [
                  {
                    "t": "- Overback"
                  },
                  {
                    "t": "- North south"
                  }
                ]
              }
            ]
          },
          {
            "t": "- High Tripod",
            "c": [
              {
                "t": "- Entries"
              },
              {
                "t": "- Arm and head position"
              },
              {
                "t": "- Passes",
                "c": [
                  {
                    "t": "- Shoving leg down"
                  },
                  {
                    "t": "- Hip switch"
                  },
                  {
                    "t": "- Knee cut"
                  },
                  {
                    "t": "- Stepping over leg"
                  }
                ]
              }
            ]
          },
          {
            "t": "- Bodylock",
            "c": [
              {
                "t": "- Bodylock positioning",
                "c": [
                  {
                    "t": "- One arm deep one shallow"
                  },
                  {
                    "t": "- Tricep pressure"
                  },
                  {
                    "t": "- Head centered"
                  },
                  {
                    "t": "- Hips to ass"
                  },
                  {
                    "t": "- Pulling in"
                  }
                ]
              },
              {
                "t": "Entries",
                "c": [
                  {
                    "t": "Flat back"
                  },
                  {
                    "t": "Seated guard"
                  }
                ]
              },
              {
                "t": "- Passes",
                "c": [
                  {
                    "t": "- Two butterfly hooks",
                    "c": [
                      {
                        "t": "- Stepping over to mount",
                        "c": [
                          {
                            "t": "- mount"
                          }
                        ]
                      },
                      {
                        "t": "- Two legs on one shin",
                        "c": [
                          {
                            "t": "- side control"
                          }
                        ]
                      },
                      {
                        "t": "- Step over to half butterfly",
                        "c": [
                          {
                            "t": "- Half butterfly"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "t": "- Half butterfly",
                    "c": [
                      {
                        "t": "- Turn hips away",
                        "c": [
                          {
                            "t": "- Back step",
                            "c": [
                              {
                                "t": "- side control"
                              }
                            ]
                          },
                          {
                            "t": "- Smash pass",
                            "c": [
                              {
                                "t": "- side control"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "t": "- Half guard",
                    "c": [
                      {
                        "t": "- Head post windshield wiper"
                      },
                      {
                        "t": "- Climb to underhooks",
                        "c": [
                          {
                            "t": "- Half guard passing"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "t": "- Dealing with defenses",
                "c": [
                  {
                    "t": "- Slipping out to closed guard",
                    "c": [
                      {
                        "t": "- Pinning feet"
                      }
                    ]
                  },
                  {
                    "t": "High knee"
                  },
                  {
                    "t": "Omoplata",
                    "c": [
                      {
                        "t": "- Gogopalata",
                        "c": [
                          {
                            "t": "- Bringing head to pummeling leg side"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "t": "- Framing head",
                    "c": [
                      {
                        "t": "- Stepping over opposite side"
                      }
                    ]
                  },
                  {
                    "t": "- Framing knees",
                    "c": [
                      {
                        "t": "- Using head to create room"
                      }
                    ]
                  },
                  {
                    "t": "- Pushing bodylock down",
                    "c": [
                      {
                        "t": "- Tight bodylock"
                      }
                    ]
                  },
                  {
                    "t": "- Underhooking arm for",
                    "c": [
                      {
                        "t": "Trap arm"
                      },
                      {
                        "t": "Shoulder crunch defence"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "t": "- Shin pin",
        "c": [
          {
            "t": "J point"
          },
          {
            "t": "- Rau drag"
          },
          {
            "t": "- Arm weave",
            "c": [
              {
                "t": "- Overback",
                "c": [
                  {
                    "t": "- North South"
                  }
                ]
              },
              {
                "t": "- Reverse collar tie",
                "c": [
                  {
                    "t": "- North south passing"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "t": "- Reverse de la riva",
        "c": [
          {
            "t": "- Kiss of the dragon",
            "c": [
              {
                "t": "- [Crab ride]"
              },
              {
                "t": "- [Wrestle up tripod rear bodylock]"
              }
            ]
          }
        ]
      },
      {
        "t": "- De la riva",
        "c": [
          {
            "t": "- Baby bolo",
            "c": [
              {
                "t": "- [crab ride]"
              },
              {
                "t": "- wrestle up tripod"
              }
            ]
          }
        ]
      },
      {
        "t": "- Knee shield Half guard",
        "c": [
          {
            "t": "- [K hook Body X"
          }
        ]
      },
      {
        "t": "- K guard",
        "c": [
          {
            "t": "- [Passing foot across"
          },
          {
            "t": "Crab Ride Entry]"
          }
        ]
      },
      {
        "t": "- Single leg X",
        "c": [
          {
            "t": "- Standing",
            "c": [
              {
                "t": "- Strip foot push knee through step leg passed to pass"
              },
              {
                "t": "- Strip leg back step"
              }
            ]
          },
          {
            "t": "- Seated",
            "c": [
              {
                "t": "- Strip foot on hip hop over push pull out"
              }
            ]
          }
        ]
      },
      {
        "t": "- X guard",
        "c": [
          {
            "t": "- Control foot clear other back step to pass"
          },
          {
            "t": "- If wrestle up inside switch tripod"
          }
        ]
      },
      {
        "t": "- Outside ashi",
        "c": [
          {
            "t": "- Control knee line , feet off hips, knee facing inwards, shoe laces to mat",
            "c": [
              {
                "t": "- Smash pass"
              }
            ]
          },
          {
            "t": "- Knee wedge berimbolo",
            "c": [
              {
                "t": "- Back take"
              },
              {
                "t": "- Reverse half",
                "c": [
                  {
                    "t": "- Twister hook arm underhook",
                    "c": [
                      {
                        "t": "- Back take"
                      }
                    ]
                  },
                  {
                    "t": "- Chair sit arm underhook"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "t": "- Butterfly ashi",
        "c": [
          {
            "t": "- Clear foot back step"
          },
          {
            "t": "- Spin out if ankle being exposed",
            "c": [
              {
                "t": "- Escape"
              },
              {
                "t": "- Crab ride"
              }
            ]
          }
        ]
      },
      {
        "t": "- Reverse de la riva",
        "c": [
          {
            "t": "- Back step strip foot step back in",
            "c": [
              {
                "t": "- I point"
              }
            ]
          },
          {
            "t": "- Diving to crab x",
            "c": [
              {
                "t": "- Crab ride"
              }
            ]
          }
        ]
      },
      {
        "t": "- De la riva",
        "c": [
          {
            "t": "- Turn knee outward",
            "c": [
              {
                "t": "- Push ankle force headquartes",
                "c": [
                  {
                    "t": "- Headquarters"
                  },
                  {
                    "t": "- High tripod"
                  }
                ]
              },
              {
                "t": "- Knee to flooor"
              }
            ]
          },
          {
            "t": "- Diving leg drag",
            "c": [
              {
                "t": "- Hammer down"
              }
            ]
          },
          {
            "t": "- Diving crab x",
            "c": [
              {
                "t": "- Crab ride"
              }
            ]
          }
        ]
      },
      {
        "t": "- K guard",
        "c": [
          {
            "t": "- Hips low on foot fight feet",
            "c": [
              {
                "t": "- North south passing"
              },
              {
                "t": "- Underhook mount"
              }
            ]
          },
          {
            "t": "- Crab shin wedge",
            "c": [
              {
                "t": "- Crab ride"
              }
            ]
          }
        ]
      },
      {
        "t": "- Knee shield half guard",
        "c": [
          {
            "t": "- Standard",
            "c": [
              {
                "t": "- Sprawling split squat"
              }
            ]
          },
          {
            "t": "- Z guard",
            "c": [
              {
                "t": "- Low head split squat"
              }
            ]
          }
        ]
      },
      {
        "t": "- Half butterfly",
        "c": [
          {
            "t": "- High tripod"
          },
          {
            "t": "- Bodylock"
          }
        ]
      },
      {
        "t": "- Butterfly guard",
        "c": [
          {
            "t": "- Bodylock"
          },
          {
            "t": "- High tripod"
          },
          {
            "t": "shoulder crunch",
            "c": [
              {
                "t": "- Early prevention"
              },
              {
                "t": "- Shoulder crunch defence"
              },
              {
                "t": "- Double unders",
                "c": [
                  {
                    "t": "- Posture up pummel underhook"
                  },
                  {
                    "t": "- Arms above head",
                    "c": [
                      {
                        "t": "- Elbows back",
                        "c": [
                          {
                            "t": "- Posture up pummel underhook"
                          },
                          {
                            "t": "- Foot on hip",
                            "c": [
                              {
                                "t": "- Hip switch",
                                "c": [
                                  {
                                    "t": "- Posture up pummel underhook"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "t": "- Wrestle ups"
              },
              {
                "t": "Subtopic"
              }
            ]
          }
        ]
      },
      {
        "t": "- Half Guard Passing",
        "c": [
          {
            "t": "- Chest to chest",
            "c": [
              {
                "t": "- Upper body controls",
                "c": [
                  {
                    "t": "- Crossface"
                  },
                  {
                    "t": "- Double unders"
                  },
                  {
                    "t": "- Near side underhook"
                  },
                  {
                    "t": "- Head positioning"
                  }
                ]
              },
              {
                "t": "- Passes",
                "c": [
                  {
                    "t": "- Windshield wiper",
                    "c": [
                      {
                        "t": "- Three quarter mount",
                        "c": [
                          {
                            "t": "- Mount"
                          }
                        ]
                      },
                      {
                        "t": "- Knee cut"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "t": "- Quarter guard",
        "c": [
          {
            "t": "- Side control"
          },
          {
            "t": "- Dealing with defences",
            "c": [
              {
                "t": "- John wayne sweep",
                "c": [
                  {
                    "t": "- Knees facing same way"
                  }
                ]
              },
              {
                "t": "- Kimura",
                "c": [
                  {
                    "t": "- Early prevention"
                  },
                  {
                    "t": "- Clearing kimura"
                  }
                ]
              },
              {
                "t": "- Underhook wrestle up",
                "c": [
                  {
                    "t": "- overhook back step"
                  },
                  {
                    "t": "- Early prevention hip clamp"
                  }
                ]
              }
            ]
          },
          {
            "t": "- Knee shield",
            "c": [
              {
                "t": "- Split squat camping",
                "c": [
                  {
                    "t": "- Sprawling",
                    "c": [
                      {
                        "t": "- Rau drag"
                      },
                      {
                        "t": "- Smashing knee shield",
                        "c": [
                          {
                            "t": "- Shin pin"
                          },
                          {
                            "t": "- Mount"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "t": "- Tripoding",
                    "c": [
                      {
                        "t": "- Shin pin"
                      }
                    ]
                  },
                  {
                    "t": "- Dealing with defences",
                    "c": [
                      {
                        "t": "- Reverse de la riva",
                        "c": [
                          {
                            "t": "- Back step J point"
                          }
                        ]
                      },
                      {
                        "t": "- K hook",
                        "c": [
                          {
                            "t": "- Hand positioning"
                          },
                          {
                            "t": "- Elbow blocking"
                          }
                        ]
                      },
                      {
                        "t": "- Arm drag",
                        "c": [
                          {
                            "t": "- Overback"
                          }
                        ]
                      },
                      {
                        "t": "- Underhook wrestle up",
                        "c": [
                          {
                            "t": "- Clampoing hip near side underhook"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "t": "- Z Guard"
          },
          {
            "t": "- Half butterfly",
            "c": [
              {
                "t": "- High Tripod",
                "c": [
                  {
                    "t": "- Arm and head position"
                  },
                  {
                    "t": "- Passes",
                    "c": [
                      {
                        "t": "- Shoving leg down"
                      },
                      {
                        "t": "- Hip switch"
                      },
                      {
                        "t": "- Knee cut"
                      },
                      {
                        "t": "- Stepping over leg"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "t": "- Headquarters",
        "c": [
          {
            "t": "- Leg drag",
            "c": [
              {
                "t": "- Side control"
              }
            ]
          },
          {
            "t": "- Over/under",
            "c": [
              {
                "t": "- Control points",
                "c": [
                  {
                    "t": "- Head pressure into hip"
                  },
                  {
                    "t": "- Straight arms"
                  }
                ]
              }
            ]
          },
          {
            "t": "- Smash pass",
            "c": [
              {
                "t": "- Side control"
              }
            ]
          },
          {
            "t": "- J point"
          },
          {
            "t": "- Throwing leg through",
            "c": [
              {
                "t": "- Three quarter mount",
                "c": [
                  {
                    "t": "- Mount"
                  }
                ]
              }
            ]
          },
          {
            "t": "- High tripod"
          }
        ]
      },
      {
        "t": "- Closed Guard",
        "c": [
          {
            "t": "- Closed Guard",
            "c": [
              {
                "t": "- Knee through centre"
              },
              {
                "t": "- Standing ankle grip underhook break",
                "c": [
                  {
                    "t": "- delariva",
                    "c": [
                      {
                        "t": "- knee too floor"
                      },
                      {
                        "t": "- smash pass"
                      }
                    ]
                  },
                  {
                    "t": "- k guard",
                    "c": [
                      {
                        "t": "- control leg step out"
                      },
                      {
                        "t": "- Crab ride shin block"
                      }
                    ]
                  }
                ]
              },
              {
                "t": "- Standing ankle grip push"
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "title": "Dominant Positions",
    "color": "#a78bfa",
    "nodes": [
      {
        "t": "- Turtle",
        "c": [
          {
            "t": "- Offence",
            "c": [
              {
                "t": "- Seat belt",
                "c": [
                  {
                    "t": "- Rolling backtake",
                    "c": [
                      {
                        "t": "- Chair sit",
                        "c": [
                          {
                            "t": "- Seated crab",
                            "c": [
                              {
                                "t": "- Back take"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "t": "- Seated crab",
                        "c": [
                          {
                            "t": "- Back take"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "t": "- Knee wedge",
                    "c": [
                      {
                        "t": "- Peel oppponents ankle",
                        "c": [
                          {
                            "t": "- Single hook"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "t": "- Spiral ride",
                "c": [
                  {
                    "t": "- Near side tip over",
                    "c": [
                      {
                        "t": "- Reverse dÃ¢Â€Â™arce"
                      },
                      {
                        "t": "- Back tale"
                      }
                    ]
                  },
                  {
                    "t": "- Far side",
                    "c": [
                      {
                        "t": "- Head an arn"
                      },
                      {
                        "t": "- Reverse dÃ¢Â€Â™arce"
                      }
                    ]
                  },
                  {
                    "t": "- Near side hook",
                    "c": [
                      {
                        "t": "- Near side tip over"
                      },
                      {
                        "t": "- Far side rolling backtake"
                      }
                    ]
                  },
                  {
                    "t": "- Far side hook",
                    "c": [
                      {
                        "t": "- Half nelson",
                        "c": [
                          {
                            "t": "- Second hook"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "t": "- Crab hook",
                "c": [
                  {
                    "t": "- Far side crab smash"
                  },
                  {
                    "t": "- Near side tip over",
                    "c": [
                      {
                        "t": "- Lat hip grip"
                      },
                      {
                        "t": "- Rear body lock",
                        "c": [
                          {
                            "t": "- Near side tip over"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "t": "- Single hook"
              }
            ]
          },
          {
            "t": "- Defence",
            "c": [
              {
                "t": "- Keep them outside of legs"
              },
              {
                "t": "- Blocking space for hooks"
              }
            ]
          },
          {
            "t": "- Counters",
            "c": [
              {
                "t": "- Cartwheel"
              },
              {
                "t": "- Inside switch"
              },
              {
                "t": "- Fatman roll"
              },
              {
                "t": "- Granby"
              }
            ]
          }
        ]
      },
      {
        "t": "- Front Headlock",
        "c": [
          {
            "t": "- Chin Strap",
            "c": [
              {
                "t": "- Head in hole",
                "c": [
                  {
                    "t": "- Offence",
                    "c": [
                      {
                        "t": "- Rear Bodylock"
                      },
                      {
                        "t": "- Single leg Rear Bodylock"
                      },
                      {
                        "t": "- Whip by"
                      }
                    ]
                  },
                  {
                    "t": "- Defence"
                  }
                ]
              },
              {
                "t": "- High elbow guillotine",
                "c": [
                  {
                    "t": "- Offence",
                    "c": [
                      {
                        "t": "- High elbow guillotine"
                      }
                    ]
                  },
                  {
                    "t": "- Defence",
                    "c": [
                      {
                        "t": "- Arm over high elbow"
                      },
                      {
                        "t": "- Stripping leg"
                      }
                    ]
                  }
                ]
              },
              {
                "t": "- High wrist guillotine",
                "c": [
                  {
                    "t": "- Offence",
                    "c": [
                      {
                        "t": "- High wrist guillotine"
                      }
                    ]
                  },
                  {
                    "t": "- Defence",
                    "c": [
                      {
                        "t": "- Strip grip turn head"
                      }
                    ]
                  }
                ]
              },
              {
                "t": "- Anaconda",
                "c": [
                  {
                    "t": "- Offence",
                    "c": [
                      {
                        "t": "- Anaconda"
                      }
                    ]
                  },
                  {
                    "t": "- Defence",
                    "c": [
                      {
                        "t": "- leg and arm post"
                      }
                    ]
                  }
                ]
              },
              {
                "t": "- Boltcutter",
                "c": [
                  {
                    "t": "- Defence",
                    "c": [
                      {
                        "t": "- Push arm off head"
                      }
                    ]
                  }
                ]
              },
              {
                "t": "- DÃ¢Â€Â™arce",
                "c": [
                  {
                    "t": "- Offence",
                    "c": [
                      {
                        "t": "- Bolt cutter"
                      },
                      {
                        "t": "- Turtle"
                      }
                    ]
                  },
                  {
                    "t": "- Defence",
                    "c": [
                      {
                        "t": "- Push arm off",
                        "c": [
                          {
                            "t": "- Lay to back"
                          }
                        ]
                      },
                      {
                        "t": "extend arm"
                      }
                    ]
                  }
                ]
              },
              {
                "t": "- Japanese Necktie",
                "c": [
                  {
                    "t": "- Offence",
                    "c": [
                      {
                        "t": "- Bolt cutter"
                      }
                    ]
                  },
                  {
                    "t": "- Defence",
                    "c": [
                      {
                        "t": "- Free leg"
                      },
                      {
                        "t": "- Hide foot"
                      },
                      {
                        "t": "- Clear bolt cutter"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "t": "- Hands Locked",
            "c": [
              {
                "t": "- High elbow guillotine",
                "c": [
                  {
                    "t": "- Offence",
                    "c": [
                      {
                        "t": "- Sit back"
                      },
                      {
                        "t": "- Roll through"
                      }
                    ]
                  },
                  {
                    "t": "- Defence",
                    "c": [
                      {
                        "t": "- Arm over high elbow"
                      },
                      {
                        "t": "- Stripping leg"
                      }
                    ]
                  }
                ]
              },
              {
                "t": "- High wrist guillotine",
                "c": [
                  {
                    "t": "- Offence"
                  },
                  {
                    "t": "- Defence"
                  }
                ]
              },
              {
                "t": "- Anaconda",
                "c": [
                  {
                    "t": "- Offence",
                    "c": [
                      {
                        "t": "- Anaconda"
                      }
                    ]
                  },
                  {
                    "t": "- Defence",
                    "c": [
                      {
                        "t": "- Arm and leg post"
                      }
                    ]
                  }
                ]
              },
              {
                "t": "- Boltcutter",
                "c": [
                  {
                    "t": "- Offence",
                    "c": [
                      {
                        "t": "- DÃ¢Â€Â™arce"
                      },
                      {
                        "t": "- Japanese Necktie",
                        "c": [
                          {
                            "t": "- Hook leg"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "t": "- Defence",
                    "c": [
                      {
                        "t": "- Push off head"
                      }
                    ]
                  }
                ]
              },
              {
                "t": "- DÃ¢Â€Â™arce",
                "c": [
                  {
                    "t": "- Offence",
                    "c": [
                      {
                        "t": "- Bolt cutter"
                      },
                      {
                        "t": "- Turtle"
                      }
                    ]
                  },
                  {
                    "t": "- Defence",
                    "c": [
                      {
                        "t": "- Escape arm"
                      }
                    ]
                  }
                ]
              },
              {
                "t": "- Japanese Necktie",
                "c": [
                  {
                    "t": "- Offence",
                    "c": [
                      {
                        "t": "- Bolt cutter"
                      },
                      {
                        "t": "Hook leg"
                      }
                    ]
                  },
                  {
                    "t": "- Defence",
                    "c": [
                      {
                        "t": "- Clear bolt cutter"
                      },
                      {
                        "t": "- Hide foot"
                      }
                    ]
                  }
                ]
              },
              {
                "t": "- Head pinch",
                "c": [
                  {
                    "t": "- Offence",
                    "c": [
                      {
                        "t": "- Anaconda"
                      }
                    ]
                  },
                  {
                    "t": "- Defence",
                    "c": [
                      {
                        "t": "- Leg up"
                      }
                    ]
                  }
                ]
              },
              {
                "t": "- Headspin",
                "c": [
                  {
                    "t": "- Offence",
                    "c": [
                      {
                        "t": "- Anaconda"
                      }
                    ]
                  },
                  {
                    "t": "- Defence",
                    "c": [
                      {
                        "t": "- Leg and arm post"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "t": "- Mount",
        "c": [
          {
            "t": "- Head arm",
            "c": [
              {
                "t": "turtles",
                "c": [
                  {
                    "t": "- Reverse darce"
                  }
                ]
              },
              {
                "t": "arm to mat",
                "c": [
                  {
                    "t": "switch armsweave armknee through",
                    "c": [
                      {
                        "t": "- Mounted triangle"
                      },
                      {
                        "t": "- S mount",
                        "c": [
                          {
                            "t": "- Arm bar"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "t": "- Control",
            "c": [
              {
                "t": "- Offence",
                "c": [
                  {
                    "t": "- Squeezing legs"
                  },
                  {
                    "t": "- Postured up"
                  },
                  {
                    "t": "- Feet position"
                  },
                  {
                    "t": "- Isolating arm"
                  }
                ]
              },
              {
                "t": "- Defence",
                "c": [
                  {
                    "t": "- Kipping escape"
                  },
                  {
                    "t": "- Foot trap"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "t": "- Side Control",
        "c": [
          {
            "t": "- Defence",
            "c": [
              {
                "t": "- Shoulder frame",
                "c": [
                  {
                    "t": "- Dig Underhook",
                    "c": [
                      {
                        "t": "- Wrestle up single leg"
                      },
                      {
                        "t": "- wrestle up dog fight"
                      }
                    ]
                  },
                  {
                    "t": "- Bring knee shield back in"
                  }
                ]
              },
              {
                "t": "- Knee frame"
              }
            ]
          },
          {
            "t": "- Offence",
            "c": [
              {
                "t": "- North South Choke"
              },
              {
                "t": "- Darce Choke"
              },
              {
                "t": "- Far side arm bar"
              },
              {
                "t": "- Von flue"
              },
              {
                "t": "- Near side Kimura",
                "c": [
                  {
                    "t": "- Kimura"
                  },
                  {
                    "t": "- Tarikoplata"
                  },
                  {
                    "t": "- Arm bar"
                  },
                  {
                    "t": "- Back take"
                  }
                ]
              },
              {
                "t": "- Triangle"
              }
            ]
          },
          {
            "t": "to mount",
            "c": [
              {
                "t": "- High step to mount"
              },
              {
                "t": "- Gift wrap to back"
              },
              {
                "t": "- Seat belt to back"
              },
              {
                "t": "- Control points",
                "c": [
                  {
                    "t": "- Tight waist"
                  },
                  {
                    "t": "- Near side underhook"
                  },
                  {
                    "t": "- Crossface"
                  }
                ]
              }
            ]
          },
          {
            "t": "- Transitions",
            "c": [
              {
                "t": "- Knee on belly"
              }
            ]
          }
        ]
      },
      {
        "t": "- North South",
        "c": [
          {
            "t": "- Control",
            "c": [
              {
                "t": "- Arms inside"
              },
              {
                "t": "- Behind tricep grips"
              },
              {
                "t": "- Collar tie"
              },
              {
                "t": "- Overback"
              },
              {
                "t": "- Reverse bodylock"
              }
            ]
          },
          {
            "t": "- Transitions",
            "c": [
              {
                "t": "- Side control"
              },
              {
                "t": "- Back",
                "c": [
                  {
                    "t": "- Gift wrap"
                  },
                  {
                    "t": "- Kimura"
                  }
                ]
              },
              {
                "t": "- Front headlock"
              },
              {
                "t": "- Turtle"
              }
            ]
          },
          {
            "t": "- Offence",
            "c": [
              {
                "t": "- North south choke"
              },
              {
                "t": "- Kimura",
                "c": [
                  {
                    "t": "- Kimura"
                  },
                  {
                    "t": "- Tarikoplata"
                  },
                  {
                    "t": "- Arm bar"
                  },
                  {
                    "t": "- Back take"
                  }
                ]
              },
              {
                "t": "- DÃ¢Â€Â™arce"
              }
            ]
          },
          {
            "t": "- Defence",
            "c": [
              {
                "t": "- Frames"
              },
              {
                "t": "- Coil"
              },
              {
                "t": "- Far shoulder foot hook"
              },
              {
                "t": "- wrestle up"
              },
              {
                "t": "- turtle"
              }
            ]
          }
        ]
      },
      {
        "t": "- Back Control"
      }
    ]
  },
  {
    "title": "Guard playing",
    "color": "#47c8ff",
    "nodes": [
      {
        "t": "- Seated Guard",
        "c": [
          {
            "t": "- Cross Grip",
            "c": [
              {
                "t": "- Collar tie",
                "c": [
                  {
                    "t": "- Overback"
                  },
                  {
                    "t": "- North south"
                  }
                ]
              }
            ]
          },
          {
            "t": "- High Tripod",
            "c": [
              {
                "t": "- Entries"
              },
              {
                "t": "- Arm and head position"
              },
              {
                "t": "- Passes",
                "c": [
                  {
                    "t": "- Shoving leg down"
                  },
                  {
                    "t": "- Hip switch"
                  },
                  {
                    "t": "- Knee cut"
                  },
                  {
                    "t": "- Stepping over leg"
                  }
                ]
              }
            ]
          },
          {
            "t": "- Bodylock",
            "c": [
              {
                "t": "- Bodylock positioning",
                "c": [
                  {
                    "t": "- One arm deep one shallow"
                  },
                  {
                    "t": "- Tricep pressure"
                  },
                  {
                    "t": "- Head centered"
                  },
                  {
                    "t": "- Hips to ass"
                  },
                  {
                    "t": "- Pulling in"
                  }
                ]
              },
              {
                "t": "- Passes",
                "c": [
                  {
                    "t": "- Two butterfly hooks",
                    "c": [
                      {
                        "t": "- Stepping over to mount",
                        "c": [
                          {
                            "t": "- mount"
                          }
                        ]
                      },
                      {
                        "t": "- Two legs on one shin",
                        "c": [
                          {
                            "t": "- side control"
                          }
                        ]
                      },
                      {
                        "t": "- Step over to half butterfly",
                        "c": [
                          {
                            "t": "- Half butterfly"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "t": "- Half butterfly",
                    "c": [
                      {
                        "t": "- Turn hips away",
                        "c": [
                          {
                            "t": "- Back step",
                            "c": [
                              {
                                "t": "- side control"
                              }
                            ]
                          },
                          {
                            "t": "- Smash pass",
                            "c": [
                              {
                                "t": "- side control"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "t": "- Half guard",
                    "c": [
                      {
                        "t": "- Head post windshield wiper"
                      },
                      {
                        "t": "- Climb to underhooks",
                        "c": [
                          {
                            "t": "- Half guard passing"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "t": "- Dealing with defenses",
                "c": [
                  {
                    "t": "- Slipping out to closed guard",
                    "c": [
                      {
                        "t": "- Pinning feet"
                      }
                    ]
                  },
                  {
                    "t": "- Gogopalata",
                    "c": [
                      {
                        "t": "- Bringing head to pummeling leg side"
                      }
                    ]
                  },
                  {
                    "t": "- Framing head",
                    "c": [
                      {
                        "t": "- Stepping over opposite side"
                      }
                    ]
                  },
                  {
                    "t": "- Framing knees",
                    "c": [
                      {
                        "t": "- Using head to create room"
                      }
                    ]
                  },
                  {
                    "t": "- Pushing bodylock down",
                    "c": [
                      {
                        "t": "- Tight bodylock"
                      }
                    ]
                  },
                  {
                    "t": "- Underhooking arm for"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "t": "- Shin pin",
        "c": [
          {
            "t": "J point"
          },
          {
            "t": "- Rau drag"
          },
          {
            "t": "- Arm weave",
            "c": [
              {
                "t": "- Overback",
                "c": [
                  {
                    "t": "- North South"
                  }
                ]
              },
              {
                "t": "- Reverse collar tie",
                "c": [
                  {
                    "t": "- North south passing"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "t": "- Reverse de la riva",
        "c": [
          {
            "t": "- Kiss of the dragon",
            "c": [
              {
                "t": "- [Crab ride]"
              },
              {
                "t": "- [Wrestle up tripod rear bodylock]"
              }
            ]
          }
        ]
      },
      {
        "t": "- De la riva",
        "c": [
          {
            "t": "- Baby bolo",
            "c": [
              {
                "t": "- [crab ride]"
              },
              {
                "t": "- wrestle up tripod"
              }
            ]
          }
        ]
      },
      {
        "t": "- Knee shield Half guard",
        "c": [
          {
            "t": "- [K hook Body X"
          }
        ]
      },
      {
        "t": "- K guard",
        "c": [
          {
            "t": "- [Passing foot across"
          },
          {
            "t": "Crab Ride Entry]"
          }
        ]
      },
      {
        "t": "- Single leg X",
        "c": [
          {
            "t": "- Standing",
            "c": [
              {
                "t": "- Strip foot push knee through step leg passed to pass"
              },
              {
                "t": "- Strip leg back step"
              }
            ]
          },
          {
            "t": "- Seated",
            "c": [
              {
                "t": "- Strip foot on hip hop over push pull out"
              }
            ]
          }
        ]
      },
      {
        "t": "- X guard",
        "c": [
          {
            "t": "- Control foot clear other back step to pass"
          },
          {
            "t": "- If wrestle up inside switch tripod"
          }
        ]
      },
      {
        "t": "- Outside ashi",
        "c": [
          {
            "t": "- Control knee line , feet off hips, knee facing inwards, shoe laces to mat",
            "c": [
              {
                "t": "- Smash pass"
              }
            ]
          },
          {
            "t": "- Knee wedge berimbolo",
            "c": [
              {
                "t": "- Back take"
              },
              {
                "t": "- Reverse half",
                "c": [
                  {
                    "t": "- Twister hook arm underhook",
                    "c": [
                      {
                        "t": "- Back take"
                      }
                    ]
                  },
                  {
                    "t": "- Chair sit arm underhook"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "t": "- Butterfly ashi",
        "c": [
          {
            "t": "- Clear foot back step"
          },
          {
            "t": "- Spin out if ankle being exposed",
            "c": [
              {
                "t": "- Escape"
              },
              {
                "t": "- Crab ride"
              }
            ]
          }
        ]
      },
      {
        "t": "- Reverse de la riva",
        "c": [
          {
            "t": "- Back step strip foot step back in",
            "c": [
              {
                "t": "- I point"
              }
            ]
          },
          {
            "t": "- Diving to crab x",
            "c": [
              {
                "t": "- Crab ride"
              }
            ]
          }
        ]
      },
      {
        "t": "- De la riva",
        "c": [
          {
            "t": "- Turn knee outward",
            "c": [
              {
                "t": "- Push ankle force headquartes",
                "c": [
                  {
                    "t": "- Headquarters"
                  },
                  {
                    "t": "- High tripod"
                  }
                ]
              },
              {
                "t": "- Knee to flooor"
              }
            ]
          },
          {
            "t": "- Diving leg drag",
            "c": [
              {
                "t": "- Hammer down"
              }
            ]
          },
          {
            "t": "- Diving crab x",
            "c": [
              {
                "t": "- Crab ride"
              }
            ]
          }
        ]
      },
      {
        "t": "- K guard",
        "c": [
          {
            "t": "- Hips low on foot fight feet",
            "c": [
              {
                "t": "- North south passing"
              },
              {
                "t": "- Underhook mount"
              }
            ]
          },
          {
            "t": "- Crab shin wedge",
            "c": [
              {
                "t": "- Crab ride"
              }
            ]
          }
        ]
      },
      {
        "t": "- Knee shield half guard",
        "c": [
          {
            "t": "- Standard",
            "c": [
              {
                "t": "- Sprawling split squat"
              }
            ]
          },
          {
            "t": "- Z guard",
            "c": [
              {
                "t": "- Low head split squat"
              }
            ]
          }
        ]
      },
      {
        "t": "- Half butterfly",
        "c": [
          {
            "t": "- High tripod"
          },
          {
            "t": "- Bodylock"
          }
        ]
      },
      {
        "t": "- Butterfly guard",
        "c": [
          {
            "t": "- Bodylock"
          },
          {
            "t": "- High tripod"
          },
          {
            "t": "shoulder crunch",
            "c": [
              {
                "t": "- Early prevention"
              },
              {
                "t": "- Shoulder crunch defence"
              },
              {
                "t": "- Double unders",
                "c": [
                  {
                    "t": "- Posture up pummel underhook"
                  },
                  {
                    "t": "- Arms above head",
                    "c": [
                      {
                        "t": "- Elbows back",
                        "c": [
                          {
                            "t": "- Posture up pummel underhook"
                          },
                          {
                            "t": "- Foot on hip",
                            "c": [
                              {
                                "t": "- Hip switch",
                                "c": [
                                  {
                                    "t": "- Posture up pummel underhook"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "t": "- Wrestle ups"
              },
              {
                "t": "Subtopic"
              }
            ]
          }
        ]
      },
      {
        "t": "- Half Guard Passing",
        "c": [
          {
            "t": "- Chest to chest",
            "c": [
              {
                "t": "- Upper body controls",
                "c": [
                  {
                    "t": "- Crossface"
                  },
                  {
                    "t": "- Double unders"
                  },
                  {
                    "t": "- Near side underhook"
                  },
                  {
                    "t": "- Head positioning"
                  }
                ]
              },
              {
                "t": "- Passes",
                "c": [
                  {
                    "t": "- Windshield wiper",
                    "c": [
                      {
                        "t": "- Three quarter mount",
                        "c": [
                          {
                            "t": "- Mount"
                          }
                        ]
                      },
                      {
                        "t": "- Knee cut"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "t": "- Quarter guard",
        "c": [
          {
            "t": "- Side control"
          },
          {
            "t": "- Dealing with defences",
            "c": [
              {
                "t": "- John wayne sweep",
                "c": [
                  {
                    "t": "- Knees facing same way"
                  }
                ]
              },
              {
                "t": "- Kimura",
                "c": [
                  {
                    "t": "- Early prevention"
                  },
                  {
                    "t": "- Clearing kimura"
                  }
                ]
              },
              {
                "t": "- Underhook wrestle up",
                "c": [
                  {
                    "t": "- overhook back step"
                  },
                  {
                    "t": "- Early prevention hip clamp"
                  }
                ]
              }
            ]
          },
          {
            "t": "- Knee shield",
            "c": [
              {
                "t": "- Split squat camping",
                "c": [
                  {
                    "t": "- Sprawling",
                    "c": [
                      {
                        "t": "- Rau drag"
                      },
                      {
                        "t": "- Smashing knee shield",
                        "c": [
                          {
                            "t": "- Shin pin"
                          },
                          {
                            "t": "- Mount"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "t": "- Tripoding",
                    "c": [
                      {
                        "t": "- Shin pin"
                      }
                    ]
                  },
                  {
                    "t": "- Dealing with defences",
                    "c": [
                      {
                        "t": "- Reverse de la riva",
                        "c": [
                          {
                            "t": "- Back step J point"
                          }
                        ]
                      },
                      {
                        "t": "- K hook",
                        "c": [
                          {
                            "t": "- Hand positioning"
                          },
                          {
                            "t": "- Elbow blocking"
                          }
                        ]
                      },
                      {
                        "t": "- Arm drag",
                        "c": [
                          {
                            "t": "- Overback"
                          }
                        ]
                      },
                      {
                        "t": "- Underhook wrestle up",
                        "c": [
                          {
                            "t": "- Clampoing hip near side underhook"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "t": "- Z Guard"
          },
          {
            "t": "- Half butterfly",
            "c": [
              {
                "t": "- High Tripod",
                "c": [
                  {
                    "t": "- Arm and head position"
                  },
                  {
                    "t": "- Passes",
                    "c": [
                      {
                        "t": "- Shoving leg down"
                      },
                      {
                        "t": "- Hip switch"
                      },
                      {
                        "t": "- Knee cut"
                      },
                      {
                        "t": "- Stepping over leg"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "t": "- Headquarters",
        "c": [
          {
            "t": "- Leg drag",
            "c": [
              {
                "t": "- Side control"
              }
            ]
          },
          {
            "t": "- Over/under",
            "c": [
              {
                "t": "- Control points",
                "c": [
                  {
                    "t": "- Head pressure into hip"
                  },
                  {
                    "t": "- Straight arms"
                  }
                ]
              }
            ]
          },
          {
            "t": "- Smash pass",
            "c": [
              {
                "t": "- Side control"
              }
            ]
          },
          {
            "t": "- J point"
          },
          {
            "t": "- Throwing leg through",
            "c": [
              {
                "t": "- Three quarter mount",
                "c": [
                  {
                    "t": "- Mount"
                  }
                ]
              }
            ]
          },
          {
            "t": "- High tripod"
          }
        ]
      },
      {
        "t": "- Closed Guard",
        "c": [
          {
            "t": "- Closed Guard",
            "c": [
              {
                "t": "- Knee through centre"
              },
              {
                "t": "- Standing ankle grip underhook break",
                "c": [
                  {
                    "t": "- delariva",
                    "c": [
                      {
                        "t": "- knee too floor"
                      },
                      {
                        "t": "- smash pass"
                      }
                    ]
                  },
                  {
                    "t": "- k guard",
                    "c": [
                      {
                        "t": "- control leg step out"
                      },
                      {
                        "t": "- Crab ride shin block"
                      }
                    ]
                  }
                ]
              },
              {
                "t": "- Standing ankle grip push"
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "title": "Crab ride & Berimibolo",
    "color": "#34d399",
    "nodes": [
      {
        "t": "- Crab ride & berimbolo",
        "v": "https://youtu.be/_ZX2QpYZsYY",
        "c": [
          {
            "t": "What is crab ride?",
            "v": "https://youtu.be/_ZX2QpYZsYY"
          },
          {
            "t": "What is a berimbolo?"
          },
          {
            "t": "Entries",
            "c": [
              {
                "t": "Inverted North south"
              }
            ]
          },
          {
            "t": "Foundations",
            "v": "https://youtu.be/fKgXnrPQd-8",
            "c": [
              {
                "t": "Crab x",
                "v": "https://youtu.be/SeCBJnjZid4",
                "c": [
                  {
                    "t": "Knee staple",
                    "v": "https://youtu.be/SeCBJnjZid4"
                  }
                ]
              },
              {
                "t": "- Leg drag",
                "v": "https://youtu.be/fKgXnrPQd-8"
              },
              {
                "t": "Hammer down",
                "v": "https://youtu.be/TcmqIqhDiUA"
              },
              {
                "t": "- Crab knee wedge",
                "c": [
                  {
                    "t": "- Back take"
                  }
                ]
              },
              {
                "t": "- Crab reverse x",
                "v": "https://youtu.be/qXd_DfldSrY",
                "c": [
                  {
                    "t": "- Leg drag",
                    "v": "https://youtu.be/qXd_DfldSrY"
                  },
                  {
                    "t": "Knee staple",
                    "v": "https://youtu.be/qI5yVJIFRwI"
                  },
                  {
                    "t": "- Hammer down",
                    "c": [
                      {
                        "t": "- Crab knee wedge",
                        "c": [
                          {
                            "t": "- Back take"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "t": "- Crab shin wedge",
                "v": "https://youtu.be/cai4w1F178U",
                "c": [
                  {
                    "t": "- Invert crab x",
                    "c": [
                      {
                        "t": "- Knee staple",
                        "c": [
                          {
                            "t": "- Side control"
                          }
                        ]
                      },
                      {
                        "t": "- Crab knee wedge",
                        "c": [
                          {
                            "t": "- Back take"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "t": "- Crab shin wedge",
                    "v": "https://youtu.be/cai4w1F178U"
                  }
                ]
              },
              {
                "t": "- Knee staple",
                "c": [
                  {
                    "t": "- Side control"
                  }
                ]
              },
              {
                "t": "- Knee wedge berimbolo",
                "c": [
                  {
                    "t": "- Back take"
                  },
                  {
                    "t": "- Reverse half",
                    "c": [
                      {
                        "t": "- Hook far arm",
                        "c": [
                          {
                            "t": "- Roll opponent back through with twister hook",
                            "c": [
                              {
                                "t": "- Back take"
                              }
                            ]
                          },
                          {
                            "t": "- Chair sit for back",
                            "c": [
                              {
                                "t": "- Back take"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "t": "- Far arm underhook twister hook back take",
                    "c": [
                      {
                        "t": "- Back take"
                      }
                    ]
                  },
                  {
                    "t": "- Far arm chair sit back take",
                    "c": [
                      {
                        "t": "- Back take"
                      }
                    ]
                  }
                ]
              },
              {
                "t": "- Twister hook battle",
                "v": "https://youtu.be/RzGu0-anSM4",
                "c": [
                  {
                    "t": "- Kick through back take",
                    "v": "https://youtu.be/RzGu0-anSM4"
                  },
                  {
                    "t": "- Rebolo off losing kick through",
                    "v": "https://youtu.be/cYjpcWI_geI"
                  },
                  {
                    "t": "Double leg counter",
                    "v": "https://youtu.be/GmfoEJ_qebg"
                  }
                ]
              }
            ]
          }
        ]
      }
    ]
  }
];

// â”€â”€â”€ STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const STATE = {
  progress: {},  // key â†’ 'none'|'drilling'|'learned'
  notes: {},     // key â†’ string
  currentNoteKey: null,
  currentFilter: 'all',
  totalNodes: 0,
  learnedNodes: 0
};

function saveState() {
  try {
    localStorage.setItem('grapplingProgress', JSON.stringify(STATE.progress));
    localStorage.setItem('grapplingNotes', JSON.stringify(STATE.notes));
  } catch(e) {}
}

function loadState() {
  try {
    const p = localStorage.getItem('grapplingProgress');
    const n = localStorage.getItem('grapplingNotes');
    if (p) STATE.progress = JSON.parse(p);
    if (n) STATE.notes = JSON.parse(n);
  } catch(e) {}
}

function makeKey(sectionTitle, text) {
  return (sectionTitle + '|' + text).toLowerCase().replace(/\s+/g, '_');
}

function updateStats() {
  let learned = 0;
  for (const v of Object.values(STATE.progress)) {
    if (v === 'learned') learned++;
  }
  STATE.learnedNodes = learned;
  document.getElementById('learnedCount').textContent = learned;
  document.getElementById('totalCount').textContent = STATE.totalNodes;
  const pct = STATE.totalNodes > 0 ? (learned / STATE.totalNodes * 100) : 0;
  document.getElementById('progressBar').style.width = pct + '%';
}

// â”€â”€â”€ BUILD UI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function buildNode(node, sectionTitle, depth, parentUl) {
  const li = document.createElement('li');
  li.className = 'tree-item';
  const key = makeKey(sectionTitle, node.t);
  li.dataset.key = key;
  li.dataset.hasVideo = node.v ? '1' : '0';

  const nodeDiv = document.createElement('div');
  nodeDiv.className = 'node';
  const indent = depth * 20;
  nodeDiv.style.paddingLeft = (indent + 8) + 'px';

  const hasChildren = node.c && node.c.length > 0;

  // Toggle
  const toggle = document.createElement('div');
  toggle.className = hasChildren ? 'node-toggle' : 'node-toggle leaf';
  toggle.textContent = hasChildren ? 'âˆ’' : 'Â·';

  // Content
  const content = document.createElement('div');
  content.className = 'node-content';

  const label = document.createElement('span');
  label.className = node.v ? 'node-label has-video' : 'node-label';
  label.textContent = node.t;
  content.appendChild(label);

  // Actions
  const actions = document.createElement('div');
  actions.className = 'node-actions';

  if (node.v || node.l) {
    if (node.v) {
      const vBtn = document.createElement('button');
      vBtn.className = 'btn-video btn-instructional';
      vBtn.textContent = 'ðŸ“– Instructional';
      vBtn.addEventListener('click', e => {
        e.stopPropagation();
        e.preventDefault();
        const vidId = node.v.split('/').pop().split('?')[0];
        const existing = li.querySelector('.inline-player-instructional');
        if (existing) { if(existing._cleanup) existing._cleanup(); existing.remove(); vBtn.textContent = 'ðŸ“– Instructional'; return; }
        const playerWrap = document.createElement('div');
        playerWrap.className = 'inline-player inline-player-instructional';
        playerWrap.style.cssText = 'padding: 8px 0 4px ' + (indent + 28) + 'px;';
        playerWrap.innerHTML = `
          <div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;border-radius:4px;border:1px solid var(--border);">
            <iframe src="https://www.youtube.com/embed/${vidId}?autoplay=1"
              style="position:absolute;top:0;left:0;width:100%;height:100%;border:0;"
              allowfullscreen allow="autoplay; encrypted-media"></iframe>
          </div>`;
        li.appendChild(playerWrap);
        vBtn.textContent = 'âœ• Close';
        playerWrap._cleanup = () => { vBtn.textContent = 'ðŸ“– Instructional'; };
      });
      actions.appendChild(vBtn);
    }

    if (node.l) {
      const lBtn = document.createElement('button');
      lBtn.className = 'btn-video btn-live';
      lBtn.textContent = 'ðŸŽ¥ Live';
      lBtn.addEventListener('click', e => {
        e.stopPropagation();
        e.preventDefault();
        const vidId = node.l.split('/').pop().split('?')[0];
        const existing = li.querySelector('.inline-player-live');
        if (existing) { if(existing._cleanup) existing._cleanup(); existing.remove(); lBtn.textContent = 'ðŸŽ¥ Live'; return; }
        const playerWrap = document.createElement('div');
        playerWrap.className = 'inline-player inline-player-live';
        playerWrap.style.cssText = 'padding: 8px 0 4px ' + (indent + 28) + 'px;';
        playerWrap.innerHTML = `
          <div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;border-radius:4px;border:1px solid var(--border);">
            <iframe src="https://www.youtube.com/embed/${vidId}?autoplay=1"
              style="position:absolute;top:0;left:0;width:100%;height:100%;border:0;"
              allowfullscreen allow="autoplay; encrypted-media"></iframe>
          </div>`;
        li.appendChild(playerWrap);
        lBtn.textContent = 'âœ• Close';
        playerWrap._cleanup = () => { lBtn.textContent = 'ðŸŽ¥ Live'; };
      });
      actions.appendChild(lBtn);
    }
  }

  // Progress pill
  const prog = document.createElement('div');
  prog.className = 'progress-pill';
  const curProg = STATE.progress[key] || 'none';
  if (curProg === 'drilling') { prog.classList.add('drilling'); prog.textContent = 'Drilling'; }
  else if (curProg === 'learned') { prog.classList.add('learned'); prog.textContent = 'âœ“ Learned'; }
  else prog.textContent = 'Track';

  prog.addEventListener('click', e => {
    e.stopPropagation();
    const cur = STATE.progress[key] || 'none';
    const next = cur === 'none' ? 'drilling' : cur === 'drilling' ? 'learned' : 'none';
    STATE.progress[key] = next;
    prog.className = 'progress-pill';
    if (next === 'drilling') { prog.classList.add('drilling'); prog.textContent = 'Drilling'; }
    else if (next === 'learned') { prog.classList.add('learned'); prog.textContent = 'âœ“ Learned'; }
    else prog.textContent = 'Track';
    li.dataset.progress = next;
    saveState();
    updateStats();
    applyFilter(STATE.currentFilter);
  });
  li.dataset.progress = curProg;
  actions.appendChild(prog);

  // Note button
  const noteBtn = document.createElement('button');
  noteBtn.className = STATE.notes[key] ? 'btn-note has-note' : 'btn-note';
  noteBtn.textContent = 'âœŽ';
  noteBtn.title = 'Add note';
  noteBtn.addEventListener('click', e => {
    e.stopPropagation();
    openNotePanel(key, node.t);
  });
  li.dataset.hasNote = STATE.notes[key] ? '1' : '0';
  actions.appendChild(noteBtn);

  content.appendChild(actions);
  nodeDiv.appendChild(toggle);
  nodeDiv.appendChild(content);
  li.appendChild(nodeDiv);

  // Children
  if (hasChildren) {
    const ul = document.createElement('ul');
    ul.className = 'tree children';
    node.c.forEach(child => buildNode(child, sectionTitle, depth + 1, ul));
    li.appendChild(ul);

    toggle.addEventListener('click', e => {
      e.stopPropagation();
      li.classList.toggle('collapsed');
      const tog = li.querySelector(':scope > .node > .node-toggle');
      if (tog && !tog.classList.contains('leaf')) {
        tog.textContent = li.classList.contains('collapsed') ? '+' : 'âˆ’';
      }
      // Remove inline player when collapsing
      if (li.classList.contains('collapsed')) {
        li.querySelectorAll('.inline-player').forEach(p => { if(p._cleanup) p._cleanup(); p.remove(); });
      }
    });

    nodeDiv.addEventListener('click', () => {
      li.classList.toggle('collapsed');
      toggle.textContent = li.classList.contains('collapsed') ? '+' : 'âˆ’';
      if (li.classList.contains('collapsed')) {
        li.querySelectorAll('.inline-player').forEach(p => { if(p._cleanup) p._cleanup(); p.remove(); });
      }
    });
  }

  STATE.totalNodes++;
  parentUl.appendChild(li);
}

function buildSections() {
  const container = document.getElementById('sections');
  SECTIONS.forEach((section, i) => {
    const div = document.createElement('div');
    div.className = 'section';
    div.dataset.section = section.title;

    const header = document.createElement('div');
    header.className = 'section-header';
    header.innerHTML = `
      <div class="section-dot" style="background:${section.color}"></div>
      <div class="section-title">${section.title}</div>
      <span class="view-in-map-btn" title="View in Mind Map" onclick="event.stopPropagation(); switchToMap()">ðŸ—º</span>
      <div class="section-chevron">â–¾</div>
    `;
    header.addEventListener('click', (e) => {
      if (e.target.classList.contains('view-in-map-btn')) return;
      div.classList.toggle('collapsed');
    });

    const body = document.createElement('div');
    body.className = 'section-body';

    const ul = document.createElement('ul');
    ul.className = 'tree';
    section.nodes.forEach(node => buildNode(node, section.title, 0, ul));
    body.appendChild(ul);

    div.appendChild(header);
    div.appendChild(body);
    container.appendChild(div);
  });
}

// â”€â”€â”€ NOTE PANEL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function openNotePanel(key, title) {
  STATE.currentNoteKey = key;
  document.getElementById('notePanelTitle').textContent = title;
  document.getElementById('noteTextarea').value = STATE.notes[key] || '';
  document.getElementById('notePanel').classList.add('open');
  document.getElementById('overlay').classList.add('active');
  setTimeout(() => document.getElementById('noteTextarea').focus(), 300);
}

function closeNotePanel() {
  document.getElementById('notePanel').classList.remove('open');
  document.getElementById('overlay').classList.remove('active');
  STATE.currentNoteKey = null;
}

document.getElementById('notePanelClose').addEventListener('click', closeNotePanel);
document.getElementById('overlay').addEventListener('click', closeNotePanel);

document.getElementById('noteSaveBtn').addEventListener('click', () => {
  const key = STATE.currentNoteKey;
  const val = document.getElementById('noteTextarea').value.trim();
  if (val) {
    STATE.notes[key] = val;
  } else {
    delete STATE.notes[key];
  }
  saveState();
  // Update note button
  const li = document.querySelector(`[data-key="${key}"]`);
  if (li) {
    const btn = li.querySelector('.btn-note');
    if (btn) {
      btn.className = val ? 'btn-note has-note' : 'btn-note';
    }
    li.dataset.hasNote = val ? '1' : '0';
  }
  applyFilter(STATE.currentFilter);
  closeNotePanel();
});

document.getElementById('noteClearBtn').addEventListener('click', () => {
  document.getElementById('noteTextarea').value = '';
});

// â”€â”€â”€ SEARCH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.getElementById('searchInput').addEventListener('input', function() {
  const q = this.value.toLowerCase().trim();
  if (!q) {
    document.querySelectorAll('.tree-item').forEach(li => {
      li.classList.remove('hidden', 'highlight');
    });
    document.querySelectorAll('.section').forEach(s => s.classList.remove('hidden'));
    applyFilter(STATE.currentFilter);
    return;
  }

  document.querySelectorAll('.tree-item').forEach(li => {
    const label = li.querySelector('.node-label');
    if (!label) return;
    const match = label.textContent.toLowerCase().includes(q);
    li.classList.toggle('highlight', match);
    li.classList.toggle('hidden', !match);
    if (match) {
      li.classList.remove('collapsed');
      let parent = li.parentElement;
      while (parent) {
        if (parent.classList && parent.classList.contains('tree-item')) {
          parent.classList.remove('hidden', 'collapsed');
        }
        if (parent.classList && parent.classList.contains('section')) {
          parent.classList.remove('hidden', 'collapsed');
        }
        parent = parent.parentElement;
      }
    }
  });
});

// â”€â”€â”€ FILTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function applyFilter(filter) {
  STATE.currentFilter = filter;
  const q = document.getElementById('searchInput').value.trim();
  if (q) return; // search takes priority

  document.querySelectorAll('.tree-item').forEach(li => {
    li.classList.remove('hidden');
    let show = true;
    if (filter === 'video') show = li.dataset.hasVideo === '1';
    else if (filter === 'drilling') show = li.dataset.progress === 'drilling';
    else if (filter === 'learned') show = li.dataset.progress === 'learned';
    else if (filter === 'notes') show = li.dataset.hasNote === '1';
    li.classList.toggle('hidden', !show);

    if (!show) return;
    // Show parents
    let parent = li.parentElement;
    while (parent) {
      if (parent.classList && parent.classList.contains('tree-item')) parent.classList.remove('hidden');
      parent = parent.parentElement;
    }
  });

  // Hide empty sections
  document.querySelectorAll('.section').forEach(sec => {
    if (filter === 'all') { sec.classList.remove('hidden'); return; }
    const visible = sec.querySelectorAll('.tree-item:not(.hidden)').length > 0;
    sec.classList.toggle('hidden', !visible);
  });
}

document.querySelectorAll('.tab').forEach(tab => {
  tab.addEventListener('click', function() {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    this.classList.add('active');
    document.getElementById('searchInput').value = '';
    document.querySelectorAll('.tree-item').forEach(li => li.classList.remove('hidden', 'highlight'));
    applyFilter(this.dataset.filter);
  });
});

// â”€â”€â”€ COLLAPSE ALL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.getElementById('collapseAllBtn').addEventListener('click', function() {
  // Collapse all sections
  document.querySelectorAll('.section').forEach(s => {
    s.classList.add('collapsed');
  });
  // Collapse all tree items that have children
  document.querySelectorAll('.tree-item').forEach(li => {
    const children = li.querySelector(':scope > .children');
    if (children) {
      li.classList.add('collapsed');
      const toggle = li.querySelector(':scope > .node > .node-toggle');
      if (toggle && !toggle.classList.contains('leaf')) toggle.textContent = '+';
    }
  });
});



function switchToMap() {
  document.querySelectorAll('.view-tab').forEach(t => t.classList.remove('active'));
  document.querySelector('[data-view="map"]').classList.add('active');
  document.getElementById('mapView').style.display = 'block';
  document.getElementById('referenceView').style.display = 'none';
  document.getElementById('customMapView').style.display = 'none';
  window.scrollTo(0, 0);
}

// â”€â”€â”€ VIEW SWITCHING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.querySelectorAll('.view-tab').forEach(tab => {
  tab.addEventListener('click', function() {
    document.querySelectorAll('.view-tab').forEach(t => t.classList.remove('active'));
    this.classList.add('active');
    const view = this.dataset.view;
    document.getElementById('mapView').style.display = view === 'map' ? 'block' : 'none';
    document.getElementById('referenceView').style.display = view === 'reference' ? 'block' : 'none';
    document.getElementById('customMapView').style.display = view === 'custommap' ? 'block' : 'none';
    if (view === 'custommap') initCustomMap();
  });
});

// â”€â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
loadState();
buildSections();
updateStats();

// Collapse everything on load
document.querySelectorAll('.section').forEach(s => s.classList.add('collapsed'));
document.querySelectorAll('.tree-item').forEach(li => {
  if (li.querySelector(':scope > .children')) {
    li.classList.add('collapsed');
    const toggle = li.querySelector(':scope > .node > .node-toggle');
    if (toggle && !toggle.classList.contains('leaf')) toggle.textContent = '+';
  }
});

// â”€â”€â”€ CUSTOM MAP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
(function() {
  const SECTIONS_DATA = [{"title": "Wrestling forBrazillian Jiu Jitsu", "color": "#e8ff47", "nodes": [{"t": "- Collar Tie", "c": [{"t": "Entries", "v": "https://youtu.be/Ye-Jvn023XI", "c": [{"t": "Outside tie", "v": "https://youtu.be/Ye-Jvn023XI"}, {"t": "Collar tie", "v": "https://youtu.be/Kf0wQ00FPBg"}]}, {"t": "Offence", "c": [{"t": "Brush by", "v": "https://youtu.be/oejTa6J72gE", "n": "Most effective when opponent is heavy on collar tie", "c": [{"t": "- Disengaging", "v": "https://youtu.be/oejTa6J72gE"}, {"t": "- Rear body lock", "v": "https://youtu.be/oXuG3DJBMEE"}, {"t": "- Snatch head inside single", "v": "https://youtu.be/B6jTl90lucM"}, {"t": "Snatch head outside single", "v": "https://youtu.be/WtUX-OiWYkU"}]}, {"t": "-Throw by", "v": "https://youtu.be/1wOwMfPHMDs", "c": [{"t": "Head to head", "v": "https://youtu.be/1wOwMfPHMDs"}, {"t": "Head to shoulder", "v": "https://youtu.be/m42WTwg3Feo"}, {"t": "Outside tie", "v": "https://youtu.be/ZLbj39rn6pU"}]}, {"t": "Snap downs", "v": "https://youtu.be/WZ--OY1yQXU", "c": [{"t": "Collar Tie and Inside Tie Snap Down", "v": "https://youtu.be/WZ--OY1yQXU"}, {"t": "Overtie snap", "v": "https://youtu.be/NlIBlkV5PVY"}, {"t": "Brush by snap", "v": "https://youtu.be/QE8PS6puob0"}]}, {"t": "- 2 on 1", "c": [{"t": "- Offence", "v": "https://youtu.be/r0-5x2mBL84", "c": [{"t": "- Climb to back", "v": "https://youtu.be/r0-5x2mBL84"}, {"t": "- Snatch single", "v": "https://youtu.be/cdQakEraYKE"}, {"t": "- ankle pick", "v": "https://youtu.be/6RapDAy2HQQ"}, {"t": "- front headlock", "v": "https://youtu.be/DzxwkbNuUBw"}]}, {"t": "- Defence", "c": [{"t": "Framing on head"}, {"t": "Pulling far elbow", "c": [{"t": "Underhook"}]}]}]}]}]}, {"t": "- Wrestling hand fighting positions", "c": [{"t": "- Inside Tie", "c": [{"t": "- [Inside Tie to Sweep Single]"}]}, {"t": "- Over/Under", "c": [{"t": "- Arm drag"}, {"t": "- Sweep single"}, {"t": "- Snatch single"}, {"t": "- Inside leg trip"}, {"t": "- Inside leg trip to scissor takedown"}, {"t": "- Knee tap"}]}, {"t": "- Underhook", "c": [{"t": "- Head inside double"}, {"t": "- run the pipe"}, {"t": "- foot lift"}, {"t": "- Side bodylock", "c": [{"t": "- Front side uchimata"}, {"t": "- Lift and dump"}]}, {"t": "- Rear bodylock throwby", "c": [{"t": "- Mat return"}, {"t": "- Cran ride entry", "c": [{"t": "- Back take"}, {"t": "- Knee staple"}]}, {"t": "- Lift and dump"}]}, {"t": "- [Snatch head inside Single]"}, {"t": "- Knee tap"}, {"t": "- Front headlock"}, {"t": "- Snatch head outside sngle"}, {"t": "- head inside single"}, {"t": "- head outside single"}]}, {"t": "- Outside tie", "c": [{"t": "- [Knee Pull Sweep Single]"}, {"t": "- throw by"}, {"t": "- collar tie throw by"}, {"t": "- head inside single"}, {"t": "- double leg"}, {"t": "- brush by"}, {"t": "- 2 on 1"}]}]}, {"t": "- Rear Bodylock", "c": [{"t": "- Turtle Rear Bodylock", "c": [{"t": "- Spiral ride", "c": [{"t": "- Near side hook", "c": [{"t": "- Far side roll", "c": [{"t": "- Hip pinch", "c": [{"t": "- Back take"}]}]}]}, {"t": "- Far side hook", "c": [{"t": "- Second hook", "c": [{"t": "- Back tke"}]}]}, {"t": "- Opponent rolls far side", "c": [{"t": "- Head arm choke"}]}]}, {"t": "- Seatbelt", "c": [{"t": "- Rolling backtake", "c": [{"t": "- Seated rear bodylock", "c": [{"t": "- Back take"}]}]}, {"t": "- Hooks in", "c": [{"t": "- Backtake"}]}]}, {"t": "- Body lock", "c": [{"t": "- Knee wedge hook in", "c": [{"t": "- Far side roll", "c": [{"t": "- Hip pinch", "c": [{"t": "- Backtake"}]}]}]}, {"t": "- Crab hook", "c": [{"t": "- Seated rear body lock", "c": [{"t": "- Back take"}]}]}]}]}, {"t": "- Tripod Rear Bodylock", "c": [{"t": "- Throwing hooks in", "c": [{"t": "- Weight on hands", "c": [{"t": "- Half nelson", "c": [{"t": "- Backtake"}]}, {"t": "- 2 on 1", "c": [{"t": "- Back take"}]}]}, {"t": "- Weight on feet", "c": [{"t": "- Rear naked choke"}, {"t": "- Underhooking knee", "c": [{"t": "- Suloev stretch"}]}, {"t": "- Half nelson", "c": [{"t": "- Shoulder stretch"}]}]}]}, {"t": "- Elbow in thigh takedown", "c": [{"t": "- Turtle Rear bodylock"}]}, {"t": "- Feet behind heels", "c": [{"t": "- Crab ride"}]}]}, {"t": "- Standing Rear Bodylock", "c": [{"t": "- Defence", "c": [{"t": "- Grip Breaks", "c": [{"t": "- [Grip Break 1]"}, {"t": "- [Grip Break 2]"}, {"t": "- [Grip Break 3 ]"}]}, {"t": "- Counters", "c": [{"t": "- [Uchi Mata Counter Front Headlock]"}, {"t": "- [Uchi Mata Counter Ankle Pick]"}, {"t": "- [Uchi Mata Throw Counter ]"}, {"t": "- [Chin Push Counter to Front Bodylock]"}, {"t": "- [Inside Leg Trip Counter to Front Bodylock]"}, {"t": "- [Lift and Sweep Counter to Side Bodylock]"}]}]}, {"t": "- Offence", "c": [{"t": "- [Mat return]"}, {"t": "- [Front Side Uchi Mata from Side Bodylock]"}, {"t": "- [Lower Back Crunch from Front Bodylock]"}, {"t": "- Crab Ride Entry"}]}, {"t": "- c"}]}]}, {"t": "- Head Inside Single", "c": [{"t": "- Offence", "c": [{"t": "- [Foot Lift Takedown]"}, {"t": "- Shin Whizzer", "c": [{"t": "- [Limp Arm Counter to Shin Whizzer]"}, {"t": "- [Running the Pipe Counter to Shin Whizzer]"}, {"t": "- [Head Inside Double Leg Counter to Shin Whizzer]"}, {"t": "- [Collar Tie Ankle Tap Counter to Shin Whizzer]"}]}, {"t": "- Tripod Defence", "c": [{"t": "- [Rear Body Lock counter to Tripod Defence]"}]}, {"t": "- Near Side Block", "c": [{"t": "- [Knock Over Rear Bodylock counter to Near Side Block Tripod]"}]}, {"t": "- Iranian", "c": [{"t": "- [Iranian counter to Sprawl]"}, {"t": "- [Iranian to Rear Bodylock counter to Sprawl]"}]}, {"t": "- Sprawl", "c": [{"t": "- [Shelfing the Leg counter to Sprawl]"}, {"t": "- [Shelfing leg through Grounded Shin Whizzer]"}, {"t": "- [Cut Back Single Leg counter to Sprawl]"}]}]}, {"t": "- Defence", "c": [{"t": "- Near Side Block", "c": [{"t": "- [Tripod Defence Near Side Block ]"}, {"t": "- Bail out"}]}, {"t": "- Shin Whizzer", "c": [{"t": "- [Shin Whizzer Front Headlock Counter]"}, {"t": "- [Grip Break Defence from Shin Whizzer]"}]}, {"t": "- Tripod Defence", "c": [{"t": "- [Inside Switch Tripod Defence]"}, {"t": "- Bail out"}]}, {"t": "- Iranian", "c": [{"t": "- [Near Side Block counter to Iranian]"}, {"t": "- Bail out"}]}, {"t": "- Sprawl", "c": [{"t": "- Grounded Shin Whizzer"}, {"t": "- [How to Sprawl]"}, {"t": "- [Sprawl to Belly Whizzer]"}]}]}]}, {"t": "- Head Outside Single", "c": [{"t": "- Running the pipe"}, {"t": "- Double leg", "c": [{"t": "- Hands locked"}, {"t": "- Split grip", "c": [{"t": "- complete double"}, {"t": "- Cut to rear body lock", "c": [{"t": "- tripod breakdown"}]}]}]}, {"t": "-Crackdown"}]}, {"t": "- Double Leg"}, {"t": "- Grounded 50/50"}]}, {"title": "Guard Passing", "color": "#ff6b35", "nodes": [{"t": "Outside Camping", "c": [{"t": "- J point", "v": "https://youtu.be/YxIJBbf55a0", "c": [{"t": "- Entries", "v": "https://youtu.be/8toccngMCZg", "c": [{"t": "Seated guard", "v": "https://youtu.be/5-jZLnq4Ak8", "c": [{"t": "Hip post", "v": "https://youtu.be/5-jZLnq4Ak8"}, {"t": "Collar tie", "v": "https://youtu.be/ZbmUQD0lIAs"}]}, {"t": "Supine guard", "v": "https://youtu.be/8toccngMCZg"}]}, {"t": "- Maintaing Camping Control points", "v": "https://youtu.be/YxIJBbf55a0"}, {"t": "- Passes", "v": "https://youtu.be/UZt7aEEds7w", "c": [{"t": "Toerando", "v": "https://youtu.be/UZt7aEEds7w"}, {"t": "Leg drag", "v": "https://youtu.be/OYfI4G1T4Lg"}, {"t": "North South", "v": "https://youtu.be/Vy-66UJAySQ"}, {"t": "Sprawl", "v": "https://youtu.be/UtSsoK-66Mc"}]}, {"t": "-Preventing andcountering defences", "v": "https://youtu.be/K8s4BNprDLM", "c": [{"t": "Lasso", "v": "https://youtu.be/kQ7gqbS78cI", "c": [{"t": "Transition opposite side", "v": "https://youtu.be/F4t5ba7q7Gk", "c": [{"t": "Bicep curl", "v": "https://youtu.be/F4t5ba7q7Gk"}, {"t": "Bicep ride", "v": "https://youtu.be/j1Wscyup89w"}, {"t": "C grip", "v": "https://youtu.be/U2Vy92unNgE"}, {"t": "Forearm pressure"}]}, {"t": "Back swim", "v": "https://youtu.be/kQ7gqbS78cI"}, {"t": "Stripping lasso", "v": "https://youtu.be/GdsHijqF0nE"}]}, {"t": "Deep Lasso", "v": "https://youtu.be/K8s4BNprDLM"}, {"t": "Bottom leg reguarding", "v": "https://youtu.be/QkHNNI6OBJQ", "c": [{"t": "Reverse de la riva", "v": "https://youtu.be/QkHNNI6OBJQ"}, {"t": "K Guard", "v": "https://youtu.be/4hngRqXbdd0"}]}, {"t": "Arm Frames", "v": "https://youtu.be/_i4wJYP-ufY"}, {"t": "X guard", "v": "https://youtu.be/kOeZo7YOtEg"}, {"t": "Bringing far leg under arm", "v": "https://youtu.be/cf0JTjYqLaY", "c": [{"t": "Good elbow positioning", "v": "https://youtu.be/cf0JTjYqLaY"}, {"t": "Smash pass", "v": "https://youtu.be/b030JiTk6n0"}]}, {"t": "Foot shoulder frame", "v": "https://youtu.be/bTdaK2nOD8M"}, {"t": "Far shoulder clamp", "v": "https://youtu.be/gxeob3A3OzU"}, {"t": "Elevated hips", "v": "https://youtu.be/zAcqkPKfD6k"}]}]}, {"t": "- Supine Guard Passing", "v": "https://youtu.be/AxZjQX_zAmg", "c": [{"t": "Entries", "v": "https://youtu.be/WuqJwZVi1fQ", "c": [{"t": "- J point"}, {"t": "- Bullfighter", "v": "https://youtu.be/WuqJwZVi1fQ"}]}, {"t": "Maintaing camping control points", "v": "https://youtu.be/AxZjQX_zAmg"}, {"t": "Passes", "v": "https://youtu.be/jfVGYxM8DWM", "c": [{"t": "Toreando", "v": "https://youtu.be/jfVGYxM8DWM"}, {"t": "Head in pocket", "v": "https://youtu.be/BTDNCkCDVZk"}, {"t": "Cross control", "v": "https://youtu.be/zWjF2k9YpdQ"}, {"t": "Scoop grip", "v": "https://youtu.be/fuwhG1nlgdE"}]}, {"t": "Preventing and counter defences", "c": [{"t": "Coil", "v": "https://youtu.be/_K7PVS2V5J0", "c": [{"t": "Duck under pass", "v": "https://youtu.be/_K7PVS2V5J0"}, {"t": "Clearing early coils", "v": "https://youtu.be/-Q0Az-RU2dI"}, {"t": "Back step", "v": "https://youtu.be/nDmdipl_ukQ"}]}, {"t": "Frames", "v": "https://youtu.be/ufTLXamMOok", "c": [{"t": "Shimmying body", "v": "https://youtu.be/ufTLXamMOok"}, {"t": "Cross control pass", "v": "https://youtu.be/Esi57ptb-gY"}, {"t": "Head in pocket pass", "v": "https://youtu.be/sJEs3bd-fSc"}]}, {"t": "K Guard", "v": "https://youtu.be/AwH7GoN-0YE", "c": [{"t": "Single under pass", "v": "https://youtu.be/AwH7GoN-0YE"}]}, {"t": "Knees to chest", "v": "https://youtu.be/WMT0Cz-PBo0", "c": [{"t": "scoop grip", "v": "https://youtu.be/WMT0Cz-PBo0"}, {"t": "Cross control", "v": "https://youtu.be/9xvQoSS68SE"}]}, {"t": "Inverting", "c": [{"t": "Diving crab ride"}, {"t": "Head in belly"}]}]}]}]}, {"t": "- Seated Guard Passing", "c": [{"t": "- Cross Grip", "c": [{"t": "- Collar tie", "c": [{"t": "- Overback"}, {"t": "- North south"}]}]}, {"t": "- High Tripod", "c": [{"t": "- Entries"}, {"t": "- Arm and head position"}, {"t": "- Passes", "c": [{"t": "- Shoving leg down"}, {"t": "- Hip switch"}, {"t": "- Knee cut"}, {"t": "- Stepping over leg"}]}]}, {"t": "- Bodylock", "c": [{"t": "- Bodylock positioning", "c": [{"t": "- One arm deep one shallow"}, {"t": "- Tricep pressure"}, {"t": "- Head centered"}, {"t": "- Hips to ass"}, {"t": "- Pulling in"}]}, {"t": "Entries", "c": [{"t": "Flat back"}, {"t": "Seated guard"}]}, {"t": "- Passes", "c": [{"t": "- Two butterfly hooks", "c": [{"t": "- Stepping over to mount", "c": [{"t": "- mount"}]}, {"t": "- Two legs on one shin", "c": [{"t": "- side control"}]}, {"t": "- Step over to half butterfly", "c": [{"t": "- Half butterfly"}]}]}, {"t": "- Half butterfly", "c": [{"t": "- Turn hips away", "c": [{"t": "- Back step", "c": [{"t": "- side control"}]}, {"t": "- Smash pass", "c": [{"t": "- side control"}]}]}]}, {"t": "- Half guard", "c": [{"t": "- Head post windshield wiper"}, {"t": "- Climb to underhooks", "c": [{"t": "- Half guard passing"}]}]}]}, {"t": "- Dealing with defenses", "c": [{"t": "- Slipping out to closed guard", "c": [{"t": "- Pinning feet"}]}, {"t": "High knee"}, {"t": "Omoplata", "c": [{"t": "- Gogopalata", "c": [{"t": "- Bringing head to pummeling leg side"}]}]}, {"t": "- Framing head", "c": [{"t": "- Stepping over opposite side"}]}, {"t": "- Framing knees", "c": [{"t": "- Using head to create room"}]}, {"t": "- Pushing bodylock down", "c": [{"t": "- Tight bodylock"}]}, {"t": "- Underhooking arm for", "c": [{"t": "Trap arm"}, {"t": "Shoulder crunch defence"}]}]}]}]}, {"t": "- Shin pin", "c": [{"t": "J point"}, {"t": "- Rau drag"}, {"t": "- Arm weave", "c": [{"t": "- Overback", "c": [{"t": "- North South"}]}, {"t": "- Reverse collar tie", "c": [{"t": "- North south passing"}]}]}]}, {"t": "- Reverse de la riva", "c": [{"t": "- Kiss of the dragon", "c": [{"t": "- [Crab ride]"}, {"t": "- [Wrestle up tripod rear bodylock]"}]}]}, {"t": "- De la riva", "c": [{"t": "- Baby bolo", "c": [{"t": "- [crab ride]"}, {"t": "- wrestle up tripod"}]}]}, {"t": "- Knee shield Half guard", "c": [{"t": "- [K hook Body X"}]}, {"t": "- K guard", "c": [{"t": "- [Passing foot across"}, {"t": "Crab Ride Entry]"}]}, {"t": "- Single leg X", "c": [{"t": "- Standing", "c": [{"t": "- Strip foot push knee through step leg passed to pass"}, {"t": "- Strip leg back step"}]}, {"t": "- Seated", "c": [{"t": "- Strip foot on hip hop over push pull out"}]}]}, {"t": "- X guard", "c": [{"t": "- Control foot clear other back step to pass"}, {"t": "- If wrestle up inside switch tripod"}]}, {"t": "- Outside ashi", "c": [{"t": "- Control knee line , feet off hips, knee facing inwards, shoe laces to mat", "c": [{"t": "- Smash pass"}]}, {"t": "- Knee wedge berimbolo", "c": [{"t": "- Back take"}, {"t": "- Reverse half", "c": [{"t": "- Twister hook arm underhook", "c": [{"t": "- Back take"}]}, {"t": "- Chair sit arm underhook"}]}]}]}, {"t": "- Butterfly ashi", "c": [{"t": "- Clear foot back step"}, {"t": "- Spin out if ankle being exposed", "c": [{"t": "- Escape"}, {"t": "- Crab ride"}]}]}, {"t": "- Reverse de la riva", "c": [{"t": "- Back step strip foot step back in", "c": [{"t": "- I point"}]}, {"t": "- Diving to crab x", "c": [{"t": "- Crab ride"}]}]}, {"t": "- De la riva", "c": [{"t": "- Turn knee outward", "c": [{"t": "- Push ankle force headquartes", "c": [{"t": "- Headquarters"}, {"t": "- High tripod"}]}, {"t": "- Knee to flooor"}]}, {"t": "- Diving leg drag", "c": [{"t": "- Hammer down"}]}, {"t": "- Diving crab x", "c": [{"t": "- Crab ride"}]}]}, {"t": "- K guard", "c": [{"t": "- Hips low on foot fight feet", "c": [{"t": "- North south passing"}, {"t": "- Underhook mount"}]}, {"t": "- Crab shin wedge", "c": [{"t": "- Crab ride"}]}]}, {"t": "- Knee shield half guard", "c": [{"t": "- Standard", "c": [{"t": "- Sprawling split squat"}]}, {"t": "- Z guard", "c": [{"t": "- Low head split squat"}]}]}, {"t": "- Half butterfly", "c": [{"t": "- High tripod"}, {"t": "- Bodylock"}]}, {"t": "- Butterfly guard", "c": [{"t": "- Bodylock"}, {"t": "- High tripod"}, {"t": "shoulder crunch", "c": [{"t": "- Early prevention"}, {"t": "- Shoulder crunch defence"}, {"t": "- Double unders", "c": [{"t": "- Posture up pummel underhook"}, {"t": "- Arms above head", "c": [{"t": "- Elbows back", "c": [{"t": "- Posture up pummel underhook"}, {"t": "- Foot on hip", "c": [{"t": "- Hip switch", "c": [{"t": "- Posture up pummel underhook"}]}]}]}]}]}, {"t": "- Wrestle ups"}, {"t": "Subtopic"}]}]}, {"t": "- Half Guard Passing", "c": [{"t": "- Chest to chest", "c": [{"t": "- Upper body controls", "c": [{"t": "- Crossface"}, {"t": "- Double unders"}, {"t": "- Near side underhook"}, {"t": "- Head positioning"}]}, {"t": "- Passes", "c": [{"t": "- Windshield wiper", "c": [{"t": "- Three quarter mount", "c": [{"t": "- Mount"}]}, {"t": "- Knee cut"}]}]}]}]}, {"t": "- Quarter guard", "c": [{"t": "- Side control"}, {"t": "- Dealing with defences", "c": [{"t": "- John wayne sweep", "c": [{"t": "- Knees facing same way"}]}, {"t": "- Kimura", "c": [{"t": "- Early prevention"}, {"t": "- Clearing kimura"}]}, {"t": "- Underhook wrestle up", "c": [{"t": "- overhook back step"}, {"t": "- Early prevention hip clamp"}]}]}, {"t": "- Knee shield", "c": [{"t": "- Split squat camping", "c": [{"t": "- Sprawling", "c": [{"t": "- Rau drag"}, {"t": "- Smashing knee shield", "c": [{"t": "- Shin pin"}, {"t": "- Mount"}]}]}, {"t": "- Tripoding", "c": [{"t": "- Shin pin"}]}, {"t": "- Dealing with defences", "c": [{"t": "- Reverse de la riva", "c": [{"t": "- Back step J point"}]}, {"t": "- K hook", "c": [{"t": "- Hand positioning"}, {"t": "- Elbow blocking"}]}, {"t": "- Arm drag", "c": [{"t": "- Overback"}]}, {"t": "- Underhook wrestle up", "c": [{"t": "- Clampoing hip near side underhook"}]}]}]}]}, {"t": "- Z Guard"}, {"t": "- Half butterfly", "c": [{"t": "- High Tripod", "c": [{"t": "- Arm and head position"}, {"t": "- Passes", "c": [{"t": "- Shoving leg down"}, {"t": "- Hip switch"}, {"t": "- Knee cut"}, {"t": "- Stepping over leg"}]}]}]}]}, {"t": "- Headquarters", "c": [{"t": "- Leg drag", "c": [{"t": "- Side control"}]}, {"t": "- Over/under", "c": [{"t": "- Control points", "c": [{"t": "- Head pressure into hip"}, {"t": "- Straight arms"}]}]}, {"t": "- Smash pass", "c": [{"t": "- Side control"}]}, {"t": "- J point"}, {"t": "- Throwing leg through", "c": [{"t": "- Three quarter mount", "c": [{"t": "- Mount"}]}]}, {"t": "- High tripod"}]}, {"t": "- Closed Guard", "c": [{"t": "- Closed Guard", "c": [{"t": "- Knee through centre"}, {"t": "- Standing ankle grip underhook break", "c": [{"t": "- delariva", "c": [{"t": "- knee too floor"}, {"t": "- smash pass"}]}, {"t": "- k guard", "c": [{"t": "- control leg step out"}, {"t": "- Crab ride shin block"}]}]}, {"t": "- Standing ankle grip push"}]}]}]}, {"title": "Dominant Positions", "color": "#a78bfa", "nodes": [{"t": "- Turtle", "c": [{"t": "- Offence", "c": [{"t": "- Seat belt", "c": [{"t": "- Rolling backtake", "c": [{"t": "- Chair sit", "c": [{"t": "- Seated crab", "c": [{"t": "- Back take"}]}]}, {"t": "- Seated crab", "c": [{"t": "- Back take"}]}]}, {"t": "- Knee wedge", "c": [{"t": "- Peel oppponents ankle", "c": [{"t": "- Single hook"}]}]}]}, {"t": "- Spiral ride", "c": [{"t": "- Near side tip over", "c": [{"t": "- Reverse d\u00e2\u0080\u0099arce"}, {"t": "- Back tale"}]}, {"t": "- Far side", "c": [{"t": "- Head an arn"}, {"t": "- Reverse d\u00e2\u0080\u0099arce"}]}, {"t": "- Near side hook", "c": [{"t": "- Near side tip over"}, {"t": "- Far side rolling backtake"}]}, {"t": "- Far side hook", "c": [{"t": "- Half nelson", "c": [{"t": "- Second hook"}]}]}]}, {"t": "- Crab hook", "c": [{"t": "- Far side crab smash"}, {"t": "- Near side tip over", "c": [{"t": "- Lat hip grip"}, {"t": "- Rear body lock", "c": [{"t": "- Near side tip over"}]}]}]}, {"t": "- Single hook"}]}, {"t": "- Defence", "c": [{"t": "- Keep them outside of legs"}, {"t": "- Blocking space for hooks"}]}, {"t": "- Counters", "c": [{"t": "- Cartwheel"}, {"t": "- Inside switch"}, {"t": "- Fatman roll"}, {"t": "- Granby"}]}]}, {"t": "- Front Headlock", "c": [{"t": "- Chin Strap", "c": [{"t": "- Head in hole", "c": [{"t": "- Offence", "c": [{"t": "- Rear Bodylock"}, {"t": "- Single leg Rear Bodylock"}, {"t": "- Whip by"}]}, {"t": "- Defence"}]}, {"t": "- High elbow guillotine", "c": [{"t": "- Offence", "c": [{"t": "- High elbow guillotine"}]}, {"t": "- Defence", "c": [{"t": "- Arm over high elbow"}, {"t": "- Stripping leg"}]}]}, {"t": "- High wrist guillotine", "c": [{"t": "- Offence", "c": [{"t": "- High wrist guillotine"}]}, {"t": "- Defence", "c": [{"t": "- Strip grip turn head"}]}]}, {"t": "- Anaconda", "c": [{"t": "- Offence", "c": [{"t": "- Anaconda"}]}, {"t": "- Defence", "c": [{"t": "- leg and arm post"}]}]}, {"t": "- Boltcutter", "c": [{"t": "- Defence", "c": [{"t": "- Push arm off head"}]}]}, {"t": "- D\u00e2\u0080\u0099arce", "c": [{"t": "- Offence", "c": [{"t": "- Bolt cutter"}, {"t": "- Turtle"}]}, {"t": "- Defence", "c": [{"t": "- Push arm off", "c": [{"t": "- Lay to back"}]}, {"t": "extend arm"}]}]}, {"t": "- Japanese Necktie", "c": [{"t": "- Offence", "c": [{"t": "- Bolt cutter"}]}, {"t": "- Defence", "c": [{"t": "- Free leg"}, {"t": "- Hide foot"}, {"t": "- Clear bolt cutter"}]}]}]}, {"t": "- Hands Locked", "c": [{"t": "- High elbow guillotine", "c": [{"t": "- Offence", "c": [{"t": "- Sit back"}, {"t": "- Roll through"}]}, {"t": "- Defence", "c": [{"t": "- Arm over high elbow"}, {"t": "- Stripping leg"}]}]}, {"t": "- High wrist guillotine", "c": [{"t": "- Offence"}, {"t": "- Defence"}]}, {"t": "- Anaconda", "c": [{"t": "- Offence", "c": [{"t": "- Anaconda"}]}, {"t": "- Defence", "c": [{"t": "- Arm and leg post"}]}]}, {"t": "- Boltcutter", "c": [{"t": "- Offence", "c": [{"t": "- D\u00e2\u0080\u0099arce"}, {"t": "- Japanese Necktie", "c": [{"t": "- Hook leg"}]}]}, {"t": "- Defence", "c": [{"t": "- Push off head"}]}]}, {"t": "- D\u00e2\u0080\u0099arce", "c": [{"t": "- Offence", "c": [{"t": "- Bolt cutter"}, {"t": "- Turtle"}]}, {"t": "- Defence", "c": [{"t": "- Escape arm"}]}]}, {"t": "- Japanese Necktie", "c": [{"t": "- Offence", "c": [{"t": "- Bolt cutter"}, {"t": "Hook leg"}]}, {"t": "- Defence", "c": [{"t": "- Clear bolt cutter"}, {"t": "- Hide foot"}]}]}, {"t": "- Head pinch", "c": [{"t": "- Offence", "c": [{"t": "- Anaconda"}]}, {"t": "- Defence", "c": [{"t": "- Leg up"}]}]}, {"t": "- Headspin", "c": [{"t": "- Offence", "c": [{"t": "- Anaconda"}]}, {"t": "- Defence", "c": [{"t": "- Leg and arm post"}]}]}]}]}, {"t": "- Mount", "c": [{"t": "- Head arm", "c": [{"t": "turtles", "c": [{"t": "- Reverse darce"}]}, {"t": "arm to mat", "c": [{"t": "switch armsweave armknee through", "c": [{"t": "- Mounted triangle"}, {"t": "- S mount", "c": [{"t": "- Arm bar"}]}]}]}]}, {"t": "- Control", "c": [{"t": "- Offence", "c": [{"t": "- Squeezing legs"}, {"t": "- Postured up"}, {"t": "- Feet position"}, {"t": "- Isolating arm"}]}, {"t": "- Defence", "c": [{"t": "- Kipping escape"}, {"t": "- Foot trap"}]}]}]}, {"t": "- Side Control", "c": [{"t": "- Defence", "c": [{"t": "- Shoulder frame", "c": [{"t": "- Dig Underhook", "c": [{"t": "- Wrestle up single leg"}, {"t": "- wrestle up dog fight"}]}, {"t": "- Bring knee shield back in"}]}, {"t": "- Knee frame"}]}, {"t": "- Offence", "c": [{"t": "- North South Choke"}, {"t": "- Darce Choke"}, {"t": "- Far side arm bar"}, {"t": "- Von flue"}, {"t": "- Near side Kimura", "c": [{"t": "- Kimura"}, {"t": "- Tarikoplata"}, {"t": "- Arm bar"}, {"t": "- Back take"}]}, {"t": "- Triangle"}]}, {"t": "to mount", "c": [{"t": "- High step to mount"}, {"t": "- Gift wrap to back"}, {"t": "- Seat belt to back"}, {"t": "- Control points", "c": [{"t": "- Tight waist"}, {"t": "- Near side underhook"}, {"t": "- Crossface"}]}]}, {"t": "- Transitions", "c": [{"t": "- Knee on belly"}]}]}, {"t": "- North South", "c": [{"t": "- Control", "c": [{"t": "- Arms inside"}, {"t": "- Behind tricep grips"}, {"t": "- Collar tie"}, {"t": "- Overback"}, {"t": "- Reverse bodylock"}]}, {"t": "- Transitions", "c": [{"t": "- Side control"}, {"t": "- Back", "c": [{"t": "- Gift wrap"}, {"t": "- Kimura"}]}, {"t": "- Front headlock"}, {"t": "- Turtle"}]}, {"t": "- Offence", "c": [{"t": "- North south choke"}, {"t": "- Kimura", "c": [{"t": "- Kimura"}, {"t": "- Tarikoplata"}, {"t": "- Arm bar"}, {"t": "- Back take"}]}, {"t": "- D\u00e2\u0080\u0099arce"}]}, {"t": "- Defence", "c": [{"t": "- Frames"}, {"t": "- Coil"}, {"t": "- Far shoulder foot hook"}, {"t": "- wrestle up"}, {"t": "- turtle"}]}]}, {"t": "- Back Control"}]}, {"title": "Guard playing", "color": "#47c8ff", "nodes": [{"t": "- Seated Guard", "c": [{"t": "- Cross Grip", "c": [{"t": "- Collar tie", "c": [{"t": "- Overback"}, {"t": "- North south"}]}]}, {"t": "- High Tripod", "c": [{"t": "- Entries"}, {"t": "- Arm and head position"}, {"t": "- Passes", "c": [{"t": "- Shoving leg down"}, {"t": "- Hip switch"}, {"t": "- Knee cut"}, {"t": "- Stepping over leg"}]}]}, {"t": "- Bodylock", "c": [{"t": "- Bodylock positioning", "c": [{"t": "- One arm deep one shallow"}, {"t": "- Tricep pressure"}, {"t": "- Head centered"}, {"t": "- Hips to ass"}, {"t": "- Pulling in"}]}, {"t": "- Passes", "c": [{"t": "- Two butterfly hooks", "c": [{"t": "- Stepping over to mount", "c": [{"t": "- mount"}]}, {"t": "- Two legs on one shin", "c": [{"t": "- side control"}]}, {"t": "- Step over to half butterfly", "c": [{"t": "- Half butterfly"}]}]}, {"t": "- Half butterfly", "c": [{"t": "- Turn hips away", "c": [{"t": "- Back step", "c": [{"t": "- side control"}]}, {"t": "- Smash pass", "c": [{"t": "- side control"}]}]}]}, {"t": "- Half guard", "c": [{"t": "- Head post windshield wiper"}, {"t": "- Climb to underhooks", "c": [{"t": "- Half guard passing"}]}]}]}, {"t": "- Dealing with defenses", "c": [{"t": "- Slipping out to closed guard", "c": [{"t": "- Pinning feet"}]}, {"t": "- Gogopalata", "c": [{"t": "- Bringing head to pummeling leg side"}]}, {"t": "- Framing head", "c": [{"t": "- Stepping over opposite side"}]}, {"t": "- Framing knees", "c": [{"t": "- Using head to create room"}]}, {"t": "- Pushing bodylock down", "c": [{"t": "- Tight bodylock"}]}, {"t": "- Underhooking arm for"}]}]}]}, {"t": "- Shin pin", "c": [{"t": "J point"}, {"t": "- Rau drag"}, {"t": "- Arm weave", "c": [{"t": "- Overback", "c": [{"t": "- North South"}]}, {"t": "- Reverse collar tie", "c": [{"t": "- North south passing"}]}]}]}, {"t": "- Reverse de la riva", "c": [{"t": "- Kiss of the dragon", "c": [{"t": "- [Crab ride]"}, {"t": "- [Wrestle up tripod rear bodylock]"}]}]}, {"t": "- De la riva", "c": [{"t": "- Baby bolo", "c": [{"t": "- [crab ride]"}, {"t": "- wrestle up tripod"}]}]}, {"t": "- Knee shield Half guard", "c": [{"t": "- [K hook Body X"}]}, {"t": "- K guard", "c": [{"t": "- [Passing foot across"}, {"t": "Crab Ride Entry]"}]}, {"t": "- Single leg X", "c": [{"t": "- Standing", "c": [{"t": "- Strip foot push knee through step leg passed to pass"}, {"t": "- Strip leg back step"}]}, {"t": "- Seated", "c": [{"t": "- Strip foot on hip hop over push pull out"}]}]}, {"t": "- X guard", "c": [{"t": "- Control foot clear other back step to pass"}, {"t": "- If wrestle up inside switch tripod"}]}, {"t": "- Outside ashi", "c": [{"t": "- Control knee line , feet off hips, knee facing inwards, shoe laces to mat", "c": [{"t": "- Smash pass"}]}, {"t": "- Knee wedge berimbolo", "c": [{"t": "- Back take"}, {"t": "- Reverse half", "c": [{"t": "- Twister hook arm underhook", "c": [{"t": "- Back take"}]}, {"t": "- Chair sit arm underhook"}]}]}]}, {"t": "- Butterfly ashi", "c": [{"t": "- Clear foot back step"}, {"t": "- Spin out if ankle being exposed", "c": [{"t": "- Escape"}, {"t": "- Crab ride"}]}]}, {"t": "- Reverse de la riva", "c": [{"t": "- Back step strip foot step back in", "c": [{"t": "- I point"}]}, {"t": "- Diving to crab x", "c": [{"t": "- Crab ride"}]}]}, {"t": "- De la riva", "c": [{"t": "- Turn knee outward", "c": [{"t": "- Push ankle force headquartes", "c": [{"t": "- Headquarters"}, {"t": "- High tripod"}]}, {"t": "- Knee to flooor"}]}, {"t": "- Diving leg drag", "c": [{"t": "- Hammer down"}]}, {"t": "- Diving crab x", "c": [{"t": "- Crab ride"}]}]}, {"t": "- K guard", "c": [{"t": "- Hips low on foot fight feet", "c": [{"t": "- North south passing"}, {"t": "- Underhook mount"}]}, {"t": "- Crab shin wedge", "c": [{"t": "- Crab ride"}]}]}, {"t": "- Knee shield half guard", "c": [{"t": "- Standard", "c": [{"t": "- Sprawling split squat"}]}, {"t": "- Z guard", "c": [{"t": "- Low head split squat"}]}]}, {"t": "- Half butterfly", "c": [{"t": "- High tripod"}, {"t": "- Bodylock"}]}, {"t": "- Butterfly guard", "c": [{"t": "- Bodylock"}, {"t": "- High tripod"}, {"t": "shoulder crunch", "c": [{"t": "- Early prevention"}, {"t": "- Shoulder crunch defence"}, {"t": "- Double unders", "c": [{"t": "- Posture up pummel underhook"}, {"t": "- Arms above head", "c": [{"t": "- Elbows back", "c": [{"t": "- Posture up pummel underhook"}, {"t": "- Foot on hip", "c": [{"t": "- Hip switch", "c": [{"t": "- Posture up pummel underhook"}]}]}]}]}]}, {"t": "- Wrestle ups"}, {"t": "Subtopic"}]}]}, {"t": "- Half Guard Passing", "c": [{"t": "- Chest to chest", "c": [{"t": "- Upper body controls", "c": [{"t": "- Crossface"}, {"t": "- Double unders"}, {"t": "- Near side underhook"}, {"t": "- Head positioning"}]}, {"t": "- Passes", "c": [{"t": "- Windshield wiper", "c": [{"t": "- Three quarter mount", "c": [{"t": "- Mount"}]}, {"t": "- Knee cut"}]}]}]}]}, {"t": "- Quarter guard", "c": [{"t": "- Side control"}, {"t": "- Dealing with defences", "c": [{"t": "- John wayne sweep", "c": [{"t": "- Knees facing same way"}]}, {"t": "- Kimura", "c": [{"t": "- Early prevention"}, {"t": "- Clearing kimura"}]}, {"t": "- Underhook wrestle up", "c": [{"t": "- overhook back step"}, {"t": "- Early prevention hip clamp"}]}]}, {"t": "- Knee shield", "c": [{"t": "- Split squat camping", "c": [{"t": "- Sprawling", "c": [{"t": "- Rau drag"}, {"t": "- Smashing knee shield", "c": [{"t": "- Shin pin"}, {"t": "- Mount"}]}]}, {"t": "- Tripoding", "c": [{"t": "- Shin pin"}]}, {"t": "- Dealing with defences", "c": [{"t": "- Reverse de la riva", "c": [{"t": "- Back step J point"}]}, {"t": "- K hook", "c": [{"t": "- Hand positioning"}, {"t": "- Elbow blocking"}]}, {"t": "- Arm drag", "c": [{"t": "- Overback"}]}, {"t": "- Underhook wrestle up", "c": [{"t": "- Clampoing hip near side underhook"}]}]}]}]}, {"t": "- Z Guard"}, {"t": "- Half butterfly", "c": [{"t": "- High Tripod", "c": [{"t": "- Arm and head position"}, {"t": "- Passes", "c": [{"t": "- Shoving leg down"}, {"t": "- Hip switch"}, {"t": "- Knee cut"}, {"t": "- Stepping over leg"}]}]}]}]}, {"t": "- Headquarters", "c": [{"t": "- Leg drag", "c": [{"t": "- Side control"}]}, {"t": "- Over/under", "c": [{"t": "- Control points", "c": [{"t": "- Head pressure into hip"}, {"t": "- Straight arms"}]}]}, {"t": "- Smash pass", "c": [{"t": "- Side control"}]}, {"t": "- J point"}, {"t": "- Throwing leg through", "c": [{"t": "- Three quarter mount", "c": [{"t": "- Mount"}]}]}, {"t": "- High tripod"}]}, {"t": "- Closed Guard", "c": [{"t": "- Closed Guard", "c": [{"t": "- Knee through centre"}, {"t": "- Standing ankle grip underhook break", "c": [{"t": "- delariva", "c": [{"t": "- knee too floor"}, {"t": "- smash pass"}]}, {"t": "- k guard", "c": [{"t": "- control leg step out"}, {"t": "- Crab ride shin block"}]}]}, {"t": "- Standing ankle grip push"}]}]}]}, {"title": "Crab ride & Berimibolo", "color": "#34d399", "nodes": [{"t": "- Crab ride & berimbolo", "v": "https://youtu.be/_ZX2QpYZsYY", "c": [{"t": "What is crab ride?", "v": "https://youtu.be/_ZX2QpYZsYY"}, {"t": "What is a berimbolo?"}, {"t": "Entries", "c": [{"t": "Inverted North south"}]}, {"t": "Foundations", "v": "https://youtu.be/fKgXnrPQd-8", "c": [{"t": "Crab x", "v": "https://youtu.be/SeCBJnjZid4", "c": [{"t": "Knee staple", "v": "https://youtu.be/SeCBJnjZid4"}]}, {"t": "- Leg drag", "v": "https://youtu.be/fKgXnrPQd-8"}, {"t": "Hammer down", "v": "https://youtu.be/TcmqIqhDiUA"}, {"t": "- Crab knee wedge", "c": [{"t": "- Back take"}]}, {"t": "- Crab reverse x", "v": "https://youtu.be/qXd_DfldSrY", "c": [{"t": "- Leg drag", "v": "https://youtu.be/qXd_DfldSrY"}, {"t": "Knee staple", "v": "https://youtu.be/qI5yVJIFRwI"}, {"t": "- Hammer down", "c": [{"t": "- Crab knee wedge", "c": [{"t": "- Back take"}]}]}]}, {"t": "- Crab shin wedge", "v": "https://youtu.be/cai4w1F178U", "c": [{"t": "- Invert crab x", "c": [{"t": "- Knee staple", "c": [{"t": "- Side control"}]}, {"t": "- Crab knee wedge", "c": [{"t": "- Back take"}]}]}, {"t": "- Crab shin wedge", "v": "https://youtu.be/cai4w1F178U"}]}, {"t": "- Knee staple", "c": [{"t": "- Side control"}]}, {"t": "- Knee wedge berimbolo", "c": [{"t": "- Back take"}, {"t": "- Reverse half", "c": [{"t": "- Hook far arm", "c": [{"t": "- Roll opponent back through with twister hook", "c": [{"t": "- Back take"}]}, {"t": "- Chair sit for back", "c": [{"t": "- Back take"}]}]}]}, {"t": "- Far arm underhook twister hook back take", "c": [{"t": "- Back take"}]}, {"t": "- Far arm chair sit back take", "c": [{"t": "- Back take"}]}]}, {"t": "- Twister hook battle", "v": "https://youtu.be/RzGu0-anSM4", "c": [{"t": "- Kick through back take", "v": "https://youtu.be/RzGu0-anSM4"}, {"t": "- Rebolo off losing kick through", "v": "https://youtu.be/cYjpcWI_geI"}, {"t": "Double leg counter", "v": "https://youtu.be/GmfoEJ_qebg"}]}]}]}]}];
  const COLORS = ["#e8ff47", "#ff6b35", "#a78bfa", "#47c8ff", "#34d399"];
  
  let scale = 0.7;
  let panX = 0, panY = 0;
  let isDragging = false;
  let lastX, lastY;
  let lines = [];
  let nodes = [];

  function initMap() {
    const canvas = document.getElementById('mapContent');
    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
    svg.classList.add('map-lines');
    svg.style.position = 'absolute';
    svg.style.top = '0';
    svg.style.left = '0';
    svg.style.pointerEvents = 'none';
    svg.style.overflow = 'visible';
    canvas.appendChild(svg);

    // Root node
    const rootEl = document.createElement('div');
    rootEl.className = 'map-node root-node';
    rootEl.textContent = 'Grappling';
    rootEl.style.left = '500px';
    rootEl.style.top = '400px';
    canvas.appendChild(rootEl);

    setTimeout(() => {
      const rootW = rootEl.offsetWidth;
      const rootH = rootEl.offsetHeight;
      const rootCX = 500 + rootW/2;
      const rootCY = 400 + rootH/2;

      const sectionCount = SECTIONS_DATA.length;
      const angleStep = (2 * Math.PI) / sectionCount;
      const sectionRadius = 320;

      SECTIONS_DATA.forEach((section, si) => {
        const angle = si * angleStep - Math.PI/2;
        const sx = Math.round(rootCX + sectionRadius * Math.cos(angle));
        const sy = Math.round(rootCY + sectionRadius * Math.sin(angle));
        const color = COLORS[si % COLORS.length];

        const secEl = document.createElement('div');
        secEl.className = 'map-node section-node';
        secEl.style.borderColor = color;
        secEl.style.color = color;
        secEl.textContent = section.title;
        secEl.style.left = sx + 'px';
        secEl.style.top = sy + 'px';
        canvas.appendChild(secEl);

        setTimeout(() => {
          const secW = secEl.offsetWidth;
          const secH = secEl.offsetHeight;
          const secCX = sx + secW/2;
          const secCY = sy + secH/2;

          // Draw line from root to section
          drawLine(svg, rootCX, rootCY, secCX, secCY, color, 2);

          // Child nodes in a fan
          const childCount = section.nodes.length;
          const fanAngle = Math.min(Math.PI * 0.8, childCount * 0.15);
          const childRadius = 200;
          const startAngle = angle - fanAngle/2;

          section.nodes.forEach((node, ni) => {
            const childAngle = childCount > 1 
              ? startAngle + (fanAngle / Math.max(childCount - 1, 1)) * ni
              : angle;
            const cx = Math.round(secCX + childRadius * Math.cos(childAngle));
            const cy = Math.round(secCY + childRadius * Math.sin(childAngle));

            const childEl = document.createElement('div');
            childEl.className = 'map-node child-node' + (node.v || node.l ? ' has-video' : '');
            childEl.textContent = node.t.replace(/^[-â€¢]\s*/, '');
            childEl.style.left = cx + 'px';
            childEl.style.top = cy + 'px';
            canvas.appendChild(childEl);

            childEl.addEventListener('click', (e) => {
              e.stopPropagation();
              // Switch to reference tab and scroll to this technique
              switchToReference(section.title, node.t);
            });

            setTimeout(() => {
              const cW = childEl.offsetWidth;
              const cH = childEl.offsetHeight;
              drawLine(svg, secCX, secCY, cx + cW/2, cy + cH/2, color + '66', 1);
            }, 50);
          });
        }, 50);
      });

      // Center the view
      const canvasEl = document.getElementById('mapCanvas');
      panX = canvasEl.offsetWidth/2 - rootCX * scale;
      panY = canvasEl.offsetHeight/2 - rootCY * scale;
      applyTransform();
    }, 100);
  }

  function drawLine(svg, x1, y1, x2, y2, color, width) {
    const line = document.createElementNS('http://www.w3.org/2000/svg', 'path');
    const mx = (x1 + x2) / 2;
    line.setAttribute('d', `M ${x1} ${y1} C ${mx} ${y1}, ${mx} ${y2}, ${x2} ${y2}`);
    line.setAttribute('stroke', color);
    line.setAttribute('stroke-width', width);
    line.setAttribute('fill', 'none');
    svg.appendChild(line);
  }

  function applyTransform() {
    const content = document.getElementById('mapContent');
    if (content) content.style.transform = `translate(${panX}px, ${panY}px) scale(${scale})`;
  }

  function switchToReference(sectionTitle, nodeText) {
    // Switch to reference tab
    document.querySelectorAll('.view-tab').forEach(t => t.classList.remove('active'));
    document.querySelector('[data-view="reference"]').classList.add('active');
    document.getElementById('customMapView').style.display = 'none';
    document.getElementById('mapView').style.display = 'none';
    document.getElementById('referenceView').style.display = 'block';

    // Find and expand the matching section
    document.querySelectorAll('.section').forEach(sec => {
      if (sec.dataset.section && sec.dataset.section.toLowerCase().includes(sectionTitle.toLowerCase().slice(0,8))) {
        sec.classList.remove('collapsed');
        // Find matching node
        sec.querySelectorAll('.node-label').forEach(label => {
          if (label.textContent.toLowerCase().includes(nodeText.toLowerCase().slice(0,12))) {
            label.closest('.tree-item').scrollIntoView({behavior: 'smooth', block: 'center'});
            label.style.background = 'rgba(232,255,71,0.2)';
            setTimeout(() => label.style.background = '', 2000);
          }
        });
      }
    });
  }

  // Pan and zoom
  window.initCustomMap = function() {
    if (document.getElementById('mapContent').children.length > 1) return;
    initMap();

    const canvasEl = document.getElementById('mapCanvas');

    canvasEl.addEventListener('mousedown', e => {
      isDragging = true;
      lastX = e.clientX; lastY = e.clientY;
      canvasEl.style.cursor = 'grabbing';
    });
    window.addEventListener('mousemove', e => {
      if (!isDragging) return;
      panX += e.clientX - lastX;
      panY += e.clientY - lastY;
      lastX = e.clientX; lastY = e.clientY;
      applyTransform();
    });
    window.addEventListener('mouseup', () => { isDragging = false; canvasEl.style.cursor = 'grab'; });

    // Touch support
    canvasEl.addEventListener('touchstart', e => {
      if (e.touches.length === 1) {
        isDragging = true;
        lastX = e.touches[0].clientX; lastY = e.touches[0].clientY;
      }
    });
    canvasEl.addEventListener('touchmove', e => {
      if (!isDragging || e.touches.length !== 1) return;
      e.preventDefault();
      panX += e.touches[0].clientX - lastX;
      panY += e.touches[0].clientY - lastY;
      lastX = e.touches[0].clientX; lastY = e.touches[0].clientY;
      applyTransform();
    }, {passive: false});
    canvasEl.addEventListener('touchend', () => { isDragging = false; });

    canvasEl.addEventListener('wheel', e => {
      e.preventDefault();
      const delta = e.deltaY > 0 ? 0.9 : 1.1;
      scale = Math.min(Math.max(scale * delta, 0.2), 3);
      applyTransform();
    }, {passive: false});

    document.getElementById('zoomIn').addEventListener('click', () => { scale = Math.min(scale * 1.2, 3); applyTransform(); });
    document.getElementById('zoomOut').addEventListener('click', () => { scale = Math.max(scale * 0.8, 0.2); applyTransform(); });
    document.getElementById('resetView').addEventListener('click', () => {
      scale = 0.7;
      const canvasEl = document.getElementById('mapCanvas');
      panX = canvasEl.offsetWidth/2 - 540 * scale;
      panY = canvasEl.offsetHeight/2 - 415 * scale;
      applyTransform();
    });
  };
})();


// â”€â”€â”€ CUSTOM MAP V2 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
(function() {
  const DATA = [{"title": "Wrestling forBrazillian Jiu Jitsu", "color": "#e8ff47", "nodes": [{"t": "- Collar Tie", "c": [{"t": "Entries", "v": "https://youtu.be/Ye-Jvn023XI", "c": [{"t": "Outside tie", "v": "https://youtu.be/Ye-Jvn023XI"}, {"t": "Collar tie", "v": "https://youtu.be/Kf0wQ00FPBg"}]}, {"t": "Offence", "c": [{"t": "Brush by", "v": "https://youtu.be/oejTa6J72gE", "n": "Most effective when opponent is heavy on collar tie", "c": [{"t": "- Disengaging", "v": "https://youtu.be/oejTa6J72gE"}, {"t": "- Rear body lock", "v": "https://youtu.be/oXuG3DJBMEE"}, {"t": "- Snatch head inside single", "v": "https://youtu.be/B6jTl90lucM"}, {"t": "Snatch head outside single", "v": "https://youtu.be/WtUX-OiWYkU"}]}, {"t": "-Throw by", "v": "https://youtu.be/1wOwMfPHMDs", "c": [{"t": "Head to head", "v": "https://youtu.be/1wOwMfPHMDs"}, {"t": "Head to shoulder", "v": "https://youtu.be/m42WTwg3Feo"}, {"t": "Outside tie", "v": "https://youtu.be/ZLbj39rn6pU"}]}, {"t": "Snap downs", "v": "https://youtu.be/WZ--OY1yQXU", "c": [{"t": "Collar Tie and Inside Tie Snap Down", "v": "https://youtu.be/WZ--OY1yQXU"}, {"t": "Overtie snap", "v": "https://youtu.be/NlIBlkV5PVY"}, {"t": "Brush by snap", "v": "https://youtu.be/QE8PS6puob0"}]}, {"t": "- 2 on 1", "c": [{"t": "- Offence", "v": "https://youtu.be/r0-5x2mBL84", "c": [{"t": "- Climb to back", "v": "https://youtu.be/r0-5x2mBL84"}, {"t": "- Snatch single", "v": "https://youtu.be/cdQakEraYKE"}, {"t": "- ankle pick", "v": "https://youtu.be/6RapDAy2HQQ"}, {"t": "- front headlock", "v": "https://youtu.be/DzxwkbNuUBw"}]}, {"t": "- Defence", "c": [{"t": "Framing on head"}, {"t": "Pulling far elbow", "c": [{"t": "Underhook"}]}]}]}]}]}, {"t": "- Wrestling hand fighting positions", "c": [{"t": "- Inside Tie", "c": [{"t": "- [Inside Tie to Sweep Single]"}]}, {"t": "- Over/Under", "c": [{"t": "- Arm drag"}, {"t": "- Sweep single"}, {"t": "- Snatch single"}, {"t": "- Inside leg trip"}, {"t": "- Inside leg trip to scissor takedown"}, {"t": "- Knee tap"}]}, {"t": "- Underhook", "c": [{"t": "- Head inside double"}, {"t": "- run the pipe"}, {"t": "- foot lift"}, {"t": "- Side bodylock", "c": [{"t": "- Front side uchimata"}, {"t": "- Lift and dump"}]}, {"t": "- Rear bodylock throwby", "c": [{"t": "- Mat return"}, {"t": "- Cran ride entry", "c": [{"t": "- Back take"}, {"t": "- Knee staple"}]}, {"t": "- Lift and dump"}]}, {"t": "- [Snatch head inside Single]"}, {"t": "- Knee tap"}, {"t": "- Front headlock"}, {"t": "- Snatch head outside sngle"}, {"t": "- head inside single"}, {"t": "- head outside single"}]}, {"t": "- Outside tie", "c": [{"t": "- [Knee Pull Sweep Single]"}, {"t": "- throw by"}, {"t": "- collar tie throw by"}, {"t": "- head inside single"}, {"t": "- double leg"}, {"t": "- brush by"}, {"t": "- 2 on 1"}]}]}, {"t": "- Rear Bodylock", "c": [{"t": "- Turtle Rear Bodylock", "c": [{"t": "- Spiral ride", "c": [{"t": "- Near side hook", "c": [{"t": "- Far side roll", "c": [{"t": "- Hip pinch", "c": [{"t": "- Back take"}]}]}]}, {"t": "- Far side hook", "c": [{"t": "- Second hook", "c": [{"t": "- Back tke"}]}]}, {"t": "- Opponent rolls far side", "c": [{"t": "- Head arm choke"}]}]}, {"t": "- Seatbelt", "c": [{"t": "- Rolling backtake", "c": [{"t": "- Seated rear bodylock", "c": [{"t": "- Back take"}]}]}, {"t": "- Hooks in", "c": [{"t": "- Backtake"}]}]}, {"t": "- Body lock", "c": [{"t": "- Knee wedge hook in", "c": [{"t": "- Far side roll", "c": [{"t": "- Hip pinch", "c": [{"t": "- Backtake"}]}]}]}, {"t": "- Crab hook", "c": [{"t": "- Seated rear body lock", "c": [{"t": "- Back take"}]}]}]}]}, {"t": "- Tripod Rear Bodylock", "c": [{"t": "- Throwing hooks in", "c": [{"t": "- Weight on hands", "c": [{"t": "- Half nelson", "c": [{"t": "- Backtake"}]}, {"t": "- 2 on 1", "c": [{"t": "- Back take"}]}]}, {"t": "- Weight on feet", "c": [{"t": "- Rear naked choke"}, {"t": "- Underhooking knee", "c": [{"t": "- Suloev stretch"}]}, {"t": "- Half nelson", "c": [{"t": "- Shoulder stretch"}]}]}]}, {"t": "- Elbow in thigh takedown", "c": [{"t": "- Turtle Rear bodylock"}]}, {"t": "- Feet behind heels", "c": [{"t": "- Crab ride"}]}]}, {"t": "- Standing Rear Bodylock", "c": [{"t": "- Defence", "c": [{"t": "- Grip Breaks", "c": [{"t": "- [Grip Break 1]"}, {"t": "- [Grip Break 2]"}, {"t": "- [Grip Break 3 ]"}]}, {"t": "- Counters", "c": [{"t": "- [Uchi Mata Counter Front Headlock]"}, {"t": "- [Uchi Mata Counter Ankle Pick]"}, {"t": "- [Uchi Mata Throw Counter ]"}, {"t": "- [Chin Push Counter to Front Bodylock]"}, {"t": "- [Inside Leg Trip Counter to Front Bodylock]"}, {"t": "- [Lift and Sweep Counter to Side Bodylock]"}]}]}, {"t": "- Offence", "c": [{"t": "- [Mat return]"}, {"t": "- [Front Side Uchi Mata from Side Bodylock]"}, {"t": "- [Lower Back Crunch from Front Bodylock]"}, {"t": "- Crab Ride Entry"}]}, {"t": "- c"}]}]}, {"t": "- Head Inside Single", "c": [{"t": "- Offence", "c": [{"t": "- [Foot Lift Takedown]"}, {"t": "- Shin Whizzer", "c": [{"t": "- [Limp Arm Counter to Shin Whizzer]"}, {"t": "- [Running the Pipe Counter to Shin Whizzer]"}, {"t": "- [Head Inside Double Leg Counter to Shin Whizzer]"}, {"t": "- [Collar Tie Ankle Tap Counter to Shin Whizzer]"}]}, {"t": "- Tripod Defence", "c": [{"t": "- [Rear Body Lock counter to Tripod Defence]"}]}, {"t": "- Near Side Block", "c": [{"t": "- [Knock Over Rear Bodylock counter to Near Side Block Tripod]"}]}, {"t": "- Iranian", "c": [{"t": "- [Iranian counter to Sprawl]"}, {"t": "- [Iranian to Rear Bodylock counter to Sprawl]"}]}, {"t": "- Sprawl", "c": [{"t": "- [Shelfing the Leg counter to Sprawl]"}, {"t": "- [Shelfing leg through Grounded Shin Whizzer]"}, {"t": "- [Cut Back Single Leg counter to Sprawl]"}]}]}, {"t": "- Defence", "c": [{"t": "- Near Side Block", "c": [{"t": "- [Tripod Defence Near Side Block ]"}, {"t": "- Bail out"}]}, {"t": "- Shin Whizzer", "c": [{"t": "- [Shin Whizzer Front Headlock Counter]"}, {"t": "- [Grip Break Defence from Shin Whizzer]"}]}, {"t": "- Tripod Defence", "c": [{"t": "- [Inside Switch Tripod Defence]"}, {"t": "- Bail out"}]}, {"t": "- Iranian", "c": [{"t": "- [Near Side Block counter to Iranian]"}, {"t": "- Bail out"}]}, {"t": "- Sprawl", "c": [{"t": "- Grounded Shin Whizzer"}, {"t": "- [How to Sprawl]"}, {"t": "- [Sprawl to Belly Whizzer]"}]}]}]}, {"t": "- Head Outside Single", "c": [{"t": "- Running the pipe"}, {"t": "- Double leg", "c": [{"t": "- Hands locked"}, {"t": "- Split grip", "c": [{"t": "- complete double"}, {"t": "- Cut to rear body lock", "c": [{"t": "- tripod breakdown"}]}]}]}, {"t": "-Crackdown"}]}, {"t": "- Double Leg"}, {"t": "- Grounded 50/50"}]}, {"title": "Guard Passing", "color": "#ff6b35", "nodes": [{"t": "Outside Camping", "c": [{"t": "- J point", "v": "https://youtu.be/YxIJBbf55a0", "c": [{"t": "- Entries", "v": "https://youtu.be/8toccngMCZg", "c": [{"t": "Seated guard", "v": "https://youtu.be/5-jZLnq4Ak8", "c": [{"t": "Hip post", "v": "https://youtu.be/5-jZLnq4Ak8"}, {"t": "Collar tie", "v": "https://youtu.be/ZbmUQD0lIAs"}]}, {"t": "Supine guard", "v": "https://youtu.be/8toccngMCZg"}]}, {"t": "- Maintaing Camping Control points", "v": "https://youtu.be/YxIJBbf55a0"}, {"t": "- Passes", "v": "https://youtu.be/UZt7aEEds7w", "c": [{"t": "Toerando", "v": "https://youtu.be/UZt7aEEds7w"}, {"t": "Leg drag", "v": "https://youtu.be/OYfI4G1T4Lg"}, {"t": "North South", "v": "https://youtu.be/Vy-66UJAySQ"}, {"t": "Sprawl", "v": "https://youtu.be/UtSsoK-66Mc"}]}, {"t": "-Preventing andcountering defences", "v": "https://youtu.be/K8s4BNprDLM", "c": [{"t": "Lasso", "v": "https://youtu.be/kQ7gqbS78cI", "c": [{"t": "Transition opposite side", "v": "https://youtu.be/F4t5ba7q7Gk", "c": [{"t": "Bicep curl", "v": "https://youtu.be/F4t5ba7q7Gk"}, {"t": "Bicep ride", "v": "https://youtu.be/j1Wscyup89w"}, {"t": "C grip", "v": "https://youtu.be/U2Vy92unNgE"}, {"t": "Forearm pressure"}]}, {"t": "Back swim", "v": "https://youtu.be/kQ7gqbS78cI"}, {"t": "Stripping lasso", "v": "https://youtu.be/GdsHijqF0nE"}]}, {"t": "Deep Lasso", "v": "https://youtu.be/K8s4BNprDLM"}, {"t": "Bottom leg reguarding", "v": "https://youtu.be/QkHNNI6OBJQ", "c": [{"t": "Reverse de la riva", "v": "https://youtu.be/QkHNNI6OBJQ"}, {"t": "K Guard", "v": "https://youtu.be/4hngRqXbdd0"}]}, {"t": "Arm Frames", "v": "https://youtu.be/_i4wJYP-ufY"}, {"t": "X guard", "v": "https://youtu.be/kOeZo7YOtEg"}, {"t": "Bringing far leg under arm", "v": "https://youtu.be/cf0JTjYqLaY", "c": [{"t": "Good elbow positioning", "v": "https://youtu.be/cf0JTjYqLaY"}, {"t": "Smash pass", "v": "https://youtu.be/b030JiTk6n0"}]}, {"t": "Foot shoulder frame", "v": "https://youtu.be/bTdaK2nOD8M"}, {"t": "Far shoulder clamp", "v": "https://youtu.be/gxeob3A3OzU"}, {"t": "Elevated hips", "v": "https://youtu.be/zAcqkPKfD6k"}]}]}, {"t": "- Supine Guard Passing", "v": "https://youtu.be/AxZjQX_zAmg", "c": [{"t": "Entries", "v": "https://youtu.be/WuqJwZVi1fQ", "c": [{"t": "- J point"}, {"t": "- Bullfighter", "v": "https://youtu.be/WuqJwZVi1fQ"}]}, {"t": "Maintaing camping control points", "v": "https://youtu.be/AxZjQX_zAmg"}, {"t": "Passes", "v": "https://youtu.be/jfVGYxM8DWM", "c": [{"t": "Toreando", "v": "https://youtu.be/jfVGYxM8DWM"}, {"t": "Head in pocket", "v": "https://youtu.be/BTDNCkCDVZk"}, {"t": "Cross control", "v": "https://youtu.be/zWjF2k9YpdQ"}, {"t": "Scoop grip", "v": "https://youtu.be/fuwhG1nlgdE"}]}, {"t": "Preventing and counter defences", "c": [{"t": "Coil", "v": "https://youtu.be/_K7PVS2V5J0", "c": [{"t": "Duck under pass", "v": "https://youtu.be/_K7PVS2V5J0"}, {"t": "Clearing early coils", "v": "https://youtu.be/-Q0Az-RU2dI"}, {"t": "Back step", "v": "https://youtu.be/nDmdipl_ukQ"}]}, {"t": "Frames", "v": "https://youtu.be/ufTLXamMOok", "c": [{"t": "Shimmying body", "v": "https://youtu.be/ufTLXamMOok"}, {"t": "Cross control pass", "v": "https://youtu.be/Esi57ptb-gY"}, {"t": "Head in pocket pass", "v": "https://youtu.be/sJEs3bd-fSc"}]}, {"t": "K Guard", "v": "https://youtu.be/AwH7GoN-0YE", "c": [{"t": "Single under pass", "v": "https://youtu.be/AwH7GoN-0YE"}]}, {"t": "Knees to chest", "v": "https://youtu.be/WMT0Cz-PBo0", "c": [{"t": "scoop grip", "v": "https://youtu.be/WMT0Cz-PBo0"}, {"t": "Cross control", "v": "https://youtu.be/9xvQoSS68SE"}]}, {"t": "Inverting", "c": [{"t": "Diving crab ride"}, {"t": "Head in belly"}]}]}]}]}, {"t": "- Seated Guard Passing", "c": [{"t": "- Cross Grip", "c": [{"t": "- Collar tie", "c": [{"t": "- Overback"}, {"t": "- North south"}]}]}, {"t": "- High Tripod", "c": [{"t": "- Entries"}, {"t": "- Arm and head position"}, {"t": "- Passes", "c": [{"t": "- Shoving leg down"}, {"t": "- Hip switch"}, {"t": "- Knee cut"}, {"t": "- Stepping over leg"}]}]}, {"t": "- Bodylock", "c": [{"t": "- Bodylock positioning", "c": [{"t": "- One arm deep one shallow"}, {"t": "- Tricep pressure"}, {"t": "- Head centered"}, {"t": "- Hips to ass"}, {"t": "- Pulling in"}]}, {"t": "Entries", "c": [{"t": "Flat back"}, {"t": "Seated guard"}]}, {"t": "- Passes", "c": [{"t": "- Two butterfly hooks", "c": [{"t": "- Stepping over to mount", "c": [{"t": "- mount"}]}, {"t": "- Two legs on one shin", "c": [{"t": "- side control"}]}, {"t": "- Step over to half butterfly", "c": [{"t": "- Half butterfly"}]}]}, {"t": "- Half butterfly", "c": [{"t": "- Turn hips away", "c": [{"t": "- Back step", "c": [{"t": "- side control"}]}, {"t": "- Smash pass", "c": [{"t": "- side control"}]}]}]}, {"t": "- Half guard", "c": [{"t": "- Head post windshield wiper"}, {"t": "- Climb to underhooks", "c": [{"t": "- Half guard passing"}]}]}]}, {"t": "- Dealing with defenses", "c": [{"t": "- Slipping out to closed guard", "c": [{"t": "- Pinning feet"}]}, {"t": "High knee"}, {"t": "Omoplata", "c": [{"t": "- Gogopalata", "c": [{"t": "- Bringing head to pummeling leg side"}]}]}, {"t": "- Framing head", "c": [{"t": "- Stepping over opposite side"}]}, {"t": "- Framing knees", "c": [{"t": "- Using head to create room"}]}, {"t": "- Pushing bodylock down", "c": [{"t": "- Tight bodylock"}]}, {"t": "- Underhooking arm for", "c": [{"t": "Trap arm"}, {"t": "Shoulder crunch defence"}]}]}]}]}, {"t": "- Shin pin", "c": [{"t": "J point"}, {"t": "- Rau drag"}, {"t": "- Arm weave", "c": [{"t": "- Overback", "c": [{"t": "- North South"}]}, {"t": "- Reverse collar tie", "c": [{"t": "- North south passing"}]}]}]}, {"t": "- Reverse de la riva", "c": [{"t": "- Kiss of the dragon", "c": [{"t": "- [Crab ride]"}, {"t": "- [Wrestle up tripod rear bodylock]"}]}]}, {"t": "- De la riva", "c": [{"t": "- Baby bolo", "c": [{"t": "- [crab ride]"}, {"t": "- wrestle up tripod"}]}]}, {"t": "- Knee shield Half guard", "c": [{"t": "- [K hook Body X"}]}, {"t": "- K guard", "c": [{"t": "- [Passing foot across"}, {"t": "Crab Ride Entry]"}]}, {"t": "- Single leg X", "c": [{"t": "- Standing", "c": [{"t": "- Strip foot push knee through step leg passed to pass"}, {"t": "- Strip leg back step"}]}, {"t": "- Seated", "c": [{"t": "- Strip foot on hip hop over push pull out"}]}]}, {"t": "- X guard", "c": [{"t": "- Control foot clear other back step to pass"}, {"t": "- If wrestle up inside switch tripod"}]}, {"t": "- Outside ashi", "c": [{"t": "- Control knee line , feet off hips, knee facing inwards, shoe laces to mat", "c": [{"t": "- Smash pass"}]}, {"t": "- Knee wedge berimbolo", "c": [{"t": "- Back take"}, {"t": "- Reverse half", "c": [{"t": "- Twister hook arm underhook", "c": [{"t": "- Back take"}]}, {"t": "- Chair sit arm underhook"}]}]}]}, {"t": "- Butterfly ashi", "c": [{"t": "- Clear foot back step"}, {"t": "- Spin out if ankle being exposed", "c": [{"t": "- Escape"}, {"t": "- Crab ride"}]}]}, {"t": "- Reverse de la riva", "c": [{"t": "- Back step strip foot step back in", "c": [{"t": "- I point"}]}, {"t": "- Diving to crab x", "c": [{"t": "- Crab ride"}]}]}, {"t": "- De la riva", "c": [{"t": "- Turn knee outward", "c": [{"t": "- Push ankle force headquartes", "c": [{"t": "- Headquarters"}, {"t": "- High tripod"}]}, {"t": "- Knee to flooor"}]}, {"t": "- Diving leg drag", "c": [{"t": "- Hammer down"}]}, {"t": "- Diving crab x", "c": [{"t": "- Crab ride"}]}]}, {"t": "- K guard", "c": [{"t": "- Hips low on foot fight feet", "c": [{"t": "- North south passing"}, {"t": "- Underhook mount"}]}, {"t": "- Crab shin wedge", "c": [{"t": "- Crab ride"}]}]}, {"t": "- Knee shield half guard", "c": [{"t": "- Standard", "c": [{"t": "- Sprawling split squat"}]}, {"t": "- Z guard", "c": [{"t": "- Low head split squat"}]}]}, {"t": "- Half butterfly", "c": [{"t": "- High tripod"}, {"t": "- Bodylock"}]}, {"t": "- Butterfly guard", "c": [{"t": "- Bodylock"}, {"t": "- High tripod"}, {"t": "shoulder crunch", "c": [{"t": "- Early prevention"}, {"t": "- Shoulder crunch defence"}, {"t": "- Double unders", "c": [{"t": "- Posture up pummel underhook"}, {"t": "- Arms above head", "c": [{"t": "- Elbows back", "c": [{"t": "- Posture up pummel underhook"}, {"t": "- Foot on hip", "c": [{"t": "- Hip switch", "c": [{"t": "- Posture up pummel underhook"}]}]}]}]}]}, {"t": "- Wrestle ups"}, {"t": "Subtopic"}]}]}, {"t": "- Half Guard Passing", "c": [{"t": "- Chest to chest", "c": [{"t": "- Upper body controls", "c": [{"t": "- Crossface"}, {"t": "- Double unders"}, {"t": "- Near side underhook"}, {"t": "- Head positioning"}]}, {"t": "- Passes", "c": [{"t": "- Windshield wiper", "c": [{"t": "- Three quarter mount", "c": [{"t": "- Mount"}]}, {"t": "- Knee cut"}]}]}]}]}, {"t": "- Quarter guard", "c": [{"t": "- Side control"}, {"t": "- Dealing with defences", "c": [{"t": "- John wayne sweep", "c": [{"t": "- Knees facing same way"}]}, {"t": "- Kimura", "c": [{"t": "- Early prevention"}, {"t": "- Clearing kimura"}]}, {"t": "- Underhook wrestle up", "c": [{"t": "- overhook back step"}, {"t": "- Early prevention hip clamp"}]}]}, {"t": "- Knee shield", "c": [{"t": "- Split squat camping", "c": [{"t": "- Sprawling", "c": [{"t": "- Rau drag"}, {"t": "- Smashing knee shield", "c": [{"t": "- Shin pin"}, {"t": "- Mount"}]}]}, {"t": "- Tripoding", "c": [{"t": "- Shin pin"}]}, {"t": "- Dealing with defences", "c": [{"t": "- Reverse de la riva", "c": [{"t": "- Back step J point"}]}, {"t": "- K hook", "c": [{"t": "- Hand positioning"}, {"t": "- Elbow blocking"}]}, {"t": "- Arm drag", "c": [{"t": "- Overback"}]}, {"t": "- Underhook wrestle up", "c": [{"t": "- Clampoing hip near side underhook"}]}]}]}]}, {"t": "- Z Guard"}, {"t": "- Half butterfly", "c": [{"t": "- High Tripod", "c": [{"t": "- Arm and head position"}, {"t": "- Passes", "c": [{"t": "- Shoving leg down"}, {"t": "- Hip switch"}, {"t": "- Knee cut"}, {"t": "- Stepping over leg"}]}]}]}]}, {"t": "- Headquarters", "c": [{"t": "- Leg drag", "c": [{"t": "- Side control"}]}, {"t": "- Over/under", "c": [{"t": "- Control points", "c": [{"t": "- Head pressure into hip"}, {"t": "- Straight arms"}]}]}, {"t": "- Smash pass", "c": [{"t": "- Side control"}]}, {"t": "- J point"}, {"t": "- Throwing leg through", "c": [{"t": "- Three quarter mount", "c": [{"t": "- Mount"}]}]}, {"t": "- High tripod"}]}, {"t": "- Closed Guard", "c": [{"t": "- Closed Guard", "c": [{"t": "- Knee through centre"}, {"t": "- Standing ankle grip underhook break", "c": [{"t": "- delariva", "c": [{"t": "- knee too floor"}, {"t": "- smash pass"}]}, {"t": "- k guard", "c": [{"t": "- control leg step out"}, {"t": "- Crab ride shin block"}]}]}, {"t": "- Standing ankle grip push"}]}]}]}, {"title": "Dominant Positions", "color": "#a78bfa", "nodes": [{"t": "- Turtle", "c": [{"t": "- Offence", "c": [{"t": "- Seat belt", "c": [{"t": "- Rolling backtake", "c": [{"t": "- Chair sit", "c": [{"t": "- Seated crab", "c": [{"t": "- Back take"}]}]}, {"t": "- Seated crab", "c": [{"t": "- Back take"}]}]}, {"t": "- Knee wedge", "c": [{"t": "- Peel oppponents ankle", "c": [{"t": "- Single hook"}]}]}]}, {"t": "- Spiral ride", "c": [{"t": "- Near side tip over", "c": [{"t": "- Reverse d\u00e2\u0080\u0099arce"}, {"t": "- Back tale"}]}, {"t": "- Far side", "c": [{"t": "- Head an arn"}, {"t": "- Reverse d\u00e2\u0080\u0099arce"}]}, {"t": "- Near side hook", "c": [{"t": "- Near side tip over"}, {"t": "- Far side rolling backtake"}]}, {"t": "- Far side hook", "c": [{"t": "- Half nelson", "c": [{"t": "- Second hook"}]}]}]}, {"t": "- Crab hook", "c": [{"t": "- Far side crab smash"}, {"t": "- Near side tip over", "c": [{"t": "- Lat hip grip"}, {"t": "- Rear body lock", "c": [{"t": "- Near side tip over"}]}]}]}, {"t": "- Single hook"}]}, {"t": "- Defence", "c": [{"t": "- Keep them outside of legs"}, {"t": "- Blocking space for hooks"}]}, {"t": "- Counters", "c": [{"t": "- Cartwheel"}, {"t": "- Inside switch"}, {"t": "- Fatman roll"}, {"t": "- Granby"}]}]}, {"t": "- Front Headlock", "c": [{"t": "- Chin Strap", "c": [{"t": "- Head in hole", "c": [{"t": "- Offence", "c": [{"t": "- Rear Bodylock"}, {"t": "- Single leg Rear Bodylock"}, {"t": "- Whip by"}]}, {"t": "- Defence"}]}, {"t": "- High elbow guillotine", "c": [{"t": "- Offence", "c": [{"t": "- High elbow guillotine"}]}, {"t": "- Defence", "c": [{"t": "- Arm over high elbow"}, {"t": "- Stripping leg"}]}]}, {"t": "- High wrist guillotine", "c": [{"t": "- Offence", "c": [{"t": "- High wrist guillotine"}]}, {"t": "- Defence", "c": [{"t": "- Strip grip turn head"}]}]}, {"t": "- Anaconda", "c": [{"t": "- Offence", "c": [{"t": "- Anaconda"}]}, {"t": "- Defence", "c": [{"t": "- leg and arm post"}]}]}, {"t": "- Boltcutter", "c": [{"t": "- Defence", "c": [{"t": "- Push arm off head"}]}]}, {"t": "- D\u00e2\u0080\u0099arce", "c": [{"t": "- Offence", "c": [{"t": "- Bolt cutter"}, {"t": "- Turtle"}]}, {"t": "- Defence", "c": [{"t": "- Push arm off", "c": [{"t": "- Lay to back"}]}, {"t": "extend arm"}]}]}, {"t": "- Japanese Necktie", "c": [{"t": "- Offence", "c": [{"t": "- Bolt cutter"}]}, {"t": "- Defence", "c": [{"t": "- Free leg"}, {"t": "- Hide foot"}, {"t": "- Clear bolt cutter"}]}]}]}, {"t": "- Hands Locked", "c": [{"t": "- High elbow guillotine", "c": [{"t": "- Offence", "c": [{"t": "- Sit back"}, {"t": "- Roll through"}]}, {"t": "- Defence", "c": [{"t": "- Arm over high elbow"}, {"t": "- Stripping leg"}]}]}, {"t": "- High wrist guillotine", "c": [{"t": "- Offence"}, {"t": "- Defence"}]}, {"t": "- Anaconda", "c": [{"t": "- Offence", "c": [{"t": "- Anaconda"}]}, {"t": "- Defence", "c": [{"t": "- Arm and leg post"}]}]}, {"t": "- Boltcutter", "c": [{"t": "- Offence", "c": [{"t": "- D\u00e2\u0080\u0099arce"}, {"t": "- Japanese Necktie", "c": [{"t": "- Hook leg"}]}]}, {"t": "- Defence", "c": [{"t": "- Push off head"}]}]}, {"t": "- D\u00e2\u0080\u0099arce", "c": [{"t": "- Offence", "c": [{"t": "- Bolt cutter"}, {"t": "- Turtle"}]}, {"t": "- Defence", "c": [{"t": "- Escape arm"}]}]}, {"t": "- Japanese Necktie", "c": [{"t": "- Offence", "c": [{"t": "- Bolt cutter"}, {"t": "Hook leg"}]}, {"t": "- Defence", "c": [{"t": "- Clear bolt cutter"}, {"t": "- Hide foot"}]}]}, {"t": "- Head pinch", "c": [{"t": "- Offence", "c": [{"t": "- Anaconda"}]}, {"t": "- Defence", "c": [{"t": "- Leg up"}]}]}, {"t": "- Headspin", "c": [{"t": "- Offence", "c": [{"t": "- Anaconda"}]}, {"t": "- Defence", "c": [{"t": "- Leg and arm post"}]}]}]}]}, {"t": "- Mount", "c": [{"t": "- Head arm", "c": [{"t": "turtles", "c": [{"t": "- Reverse darce"}]}, {"t": "arm to mat", "c": [{"t": "switch armsweave armknee through", "c": [{"t": "- Mounted triangle"}, {"t": "- S mount", "c": [{"t": "- Arm bar"}]}]}]}]}, {"t": "- Control", "c": [{"t": "- Offence", "c": [{"t": "- Squeezing legs"}, {"t": "- Postured up"}, {"t": "- Feet position"}, {"t": "- Isolating arm"}]}, {"t": "- Defence", "c": [{"t": "- Kipping escape"}, {"t": "- Foot trap"}]}]}]}, {"t": "- Side Control", "c": [{"t": "- Defence", "c": [{"t": "- Shoulder frame", "c": [{"t": "- Dig Underhook", "c": [{"t": "- Wrestle up single leg"}, {"t": "- wrestle up dog fight"}]}, {"t": "- Bring knee shield back in"}]}, {"t": "- Knee frame"}]}, {"t": "- Offence", "c": [{"t": "- North South Choke"}, {"t": "- Darce Choke"}, {"t": "- Far side arm bar"}, {"t": "- Von flue"}, {"t": "- Near side Kimura", "c": [{"t": "- Kimura"}, {"t": "- Tarikoplata"}, {"t": "- Arm bar"}, {"t": "- Back take"}]}, {"t": "- Triangle"}]}, {"t": "to mount", "c": [{"t": "- High step to mount"}, {"t": "- Gift wrap to back"}, {"t": "- Seat belt to back"}, {"t": "- Control points", "c": [{"t": "- Tight waist"}, {"t": "- Near side underhook"}, {"t": "- Crossface"}]}]}, {"t": "- Transitions", "c": [{"t": "- Knee on belly"}]}]}, {"t": "- North South", "c": [{"t": "- Control", "c": [{"t": "- Arms inside"}, {"t": "- Behind tricep grips"}, {"t": "- Collar tie"}, {"t": "- Overback"}, {"t": "- Reverse bodylock"}]}, {"t": "- Transitions", "c": [{"t": "- Side control"}, {"t": "- Back", "c": [{"t": "- Gift wrap"}, {"t": "- Kimura"}]}, {"t": "- Front headlock"}, {"t": "- Turtle"}]}, {"t": "- Offence", "c": [{"t": "- North south choke"}, {"t": "- Kimura", "c": [{"t": "- Kimura"}, {"t": "- Tarikoplata"}, {"t": "- Arm bar"}, {"t": "- Back take"}]}, {"t": "- D\u00e2\u0080\u0099arce"}]}, {"t": "- Defence", "c": [{"t": "- Frames"}, {"t": "- Coil"}, {"t": "- Far shoulder foot hook"}, {"t": "- wrestle up"}, {"t": "- turtle"}]}]}, {"t": "- Back Control"}]}, {"title": "Guard playing", "color": "#47c8ff", "nodes": [{"t": "- Seated Guard", "c": [{"t": "- Cross Grip", "c": [{"t": "- Collar tie", "c": [{"t": "- Overback"}, {"t": "- North south"}]}]}, {"t": "- High Tripod", "c": [{"t": "- Entries"}, {"t": "- Arm and head position"}, {"t": "- Passes", "c": [{"t": "- Shoving leg down"}, {"t": "- Hip switch"}, {"t": "- Knee cut"}, {"t": "- Stepping over leg"}]}]}, {"t": "- Bodylock", "c": [{"t": "- Bodylock positioning", "c": [{"t": "- One arm deep one shallow"}, {"t": "- Tricep pressure"}, {"t": "- Head centered"}, {"t": "- Hips to ass"}, {"t": "- Pulling in"}]}, {"t": "- Passes", "c": [{"t": "- Two butterfly hooks", "c": [{"t": "- Stepping over to mount", "c": [{"t": "- mount"}]}, {"t": "- Two legs on one shin", "c": [{"t": "- side control"}]}, {"t": "- Step over to half butterfly", "c": [{"t": "- Half butterfly"}]}]}, {"t": "- Half butterfly", "c": [{"t": "- Turn hips away", "c": [{"t": "- Back step", "c": [{"t": "- side control"}]}, {"t": "- Smash pass", "c": [{"t": "- side control"}]}]}]}, {"t": "- Half guard", "c": [{"t": "- Head post windshield wiper"}, {"t": "- Climb to underhooks", "c": [{"t": "- Half guard passing"}]}]}]}, {"t": "- Dealing with defenses", "c": [{"t": "- Slipping out to closed guard", "c": [{"t": "- Pinning feet"}]}, {"t": "- Gogopalata", "c": [{"t": "- Bringing head to pummeling leg side"}]}, {"t": "- Framing head", "c": [{"t": "- Stepping over opposite side"}]}, {"t": "- Framing knees", "c": [{"t": "- Using head to create room"}]}, {"t": "- Pushing bodylock down", "c": [{"t": "- Tight bodylock"}]}, {"t": "- Underhooking arm for"}]}]}]}, {"t": "- Shin pin", "c": [{"t": "J point"}, {"t": "- Rau drag"}, {"t": "- Arm weave", "c": [{"t": "- Overback", "c": [{"t": "- North South"}]}, {"t": "- Reverse collar tie", "c": [{"t": "- North south passing"}]}]}]}, {"t": "- Reverse de la riva", "c": [{"t": "- Kiss of the dragon", "c": [{"t": "- [Crab ride]"}, {"t": "- [Wrestle up tripod rear bodylock]"}]}]}, {"t": "- De la riva", "c": [{"t": "- Baby bolo", "c": [{"t": "- [crab ride]"}, {"t": "- wrestle up tripod"}]}]}, {"t": "- Knee shield Half guard", "c": [{"t": "- [K hook Body X"}]}, {"t": "- K guard", "c": [{"t": "- [Passing foot across"}, {"t": "Crab Ride Entry]"}]}, {"t": "- Single leg X", "c": [{"t": "- Standing", "c": [{"t": "- Strip foot push knee through step leg passed to pass"}, {"t": "- Strip leg back step"}]}, {"t": "- Seated", "c": [{"t": "- Strip foot on hip hop over push pull out"}]}]}, {"t": "- X guard", "c": [{"t": "- Control foot clear other back step to pass"}, {"t": "- If wrestle up inside switch tripod"}]}, {"t": "- Outside ashi", "c": [{"t": "- Control knee line , feet off hips, knee facing inwards, shoe laces to mat", "c": [{"t": "- Smash pass"}]}, {"t": "- Knee wedge berimbolo", "c": [{"t": "- Back take"}, {"t": "- Reverse half", "c": [{"t": "- Twister hook arm underhook", "c": [{"t": "- Back take"}]}, {"t": "- Chair sit arm underhook"}]}]}]}, {"t": "- Butterfly ashi", "c": [{"t": "- Clear foot back step"}, {"t": "- Spin out if ankle being exposed", "c": [{"t": "- Escape"}, {"t": "- Crab ride"}]}]}, {"t": "- Reverse de la riva", "c": [{"t": "- Back step strip foot step back in", "c": [{"t": "- I point"}]}, {"t": "- Diving to crab x", "c": [{"t": "- Crab ride"}]}]}, {"t": "- De la riva", "c": [{"t": "- Turn knee outward", "c": [{"t": "- Push ankle force headquartes", "c": [{"t": "- Headquarters"}, {"t": "- High tripod"}]}, {"t": "- Knee to flooor"}]}, {"t": "- Diving leg drag", "c": [{"t": "- Hammer down"}]}, {"t": "- Diving crab x", "c": [{"t": "- Crab ride"}]}]}, {"t": "- K guard", "c": [{"t": "- Hips low on foot fight feet", "c": [{"t": "- North south passing"}, {"t": "- Underhook mount"}]}, {"t": "- Crab shin wedge", "c": [{"t": "- Crab ride"}]}]}, {"t": "- Knee shield half guard", "c": [{"t": "- Standard", "c": [{"t": "- Sprawling split squat"}]}, {"t": "- Z guard", "c": [{"t": "- Low head split squat"}]}]}, {"t": "- Half butterfly", "c": [{"t": "- High tripod"}, {"t": "- Bodylock"}]}, {"t": "- Butterfly guard", "c": [{"t": "- Bodylock"}, {"t": "- High tripod"}, {"t": "shoulder crunch", "c": [{"t": "- Early prevention"}, {"t": "- Shoulder crunch defence"}, {"t": "- Double unders", "c": [{"t": "- Posture up pummel underhook"}, {"t": "- Arms above head", "c": [{"t": "- Elbows back", "c": [{"t": "- Posture up pummel underhook"}, {"t": "- Foot on hip", "c": [{"t": "- Hip switch", "c": [{"t": "- Posture up pummel underhook"}]}]}]}]}]}, {"t": "- Wrestle ups"}, {"t": "Subtopic"}]}]}, {"t": "- Half Guard Passing", "c": [{"t": "- Chest to chest", "c": [{"t": "- Upper body controls", "c": [{"t": "- Crossface"}, {"t": "- Double unders"}, {"t": "- Near side underhook"}, {"t": "- Head positioning"}]}, {"t": "- Passes", "c": [{"t": "- Windshield wiper", "c": [{"t": "- Three quarter mount", "c": [{"t": "- Mount"}]}, {"t": "- Knee cut"}]}]}]}]}, {"t": "- Quarter guard", "c": [{"t": "- Side control"}, {"t": "- Dealing with defences", "c": [{"t": "- John wayne sweep", "c": [{"t": "- Knees facing same way"}]}, {"t": "- Kimura", "c": [{"t": "- Early prevention"}, {"t": "- Clearing kimura"}]}, {"t": "- Underhook wrestle up", "c": [{"t": "- overhook back step"}, {"t": "- Early prevention hip clamp"}]}]}, {"t": "- Knee shield", "c": [{"t": "- Split squat camping", "c": [{"t": "- Sprawling", "c": [{"t": "- Rau drag"}, {"t": "- Smashing knee shield", "c": [{"t": "- Shin pin"}, {"t": "- Mount"}]}]}, {"t": "- Tripoding", "c": [{"t": "- Shin pin"}]}, {"t": "- Dealing with defences", "c": [{"t": "- Reverse de la riva", "c": [{"t": "- Back step J point"}]}, {"t": "- K hook", "c": [{"t": "- Hand positioning"}, {"t": "- Elbow blocking"}]}, {"t": "- Arm drag", "c": [{"t": "- Overback"}]}, {"t": "- Underhook wrestle up", "c": [{"t": "- Clampoing hip near side underhook"}]}]}]}]}, {"t": "- Z Guard"}, {"t": "- Half butterfly", "c": [{"t": "- High Tripod", "c": [{"t": "- Arm and head position"}, {"t": "- Passes", "c": [{"t": "- Shoving leg down"}, {"t": "- Hip switch"}, {"t": "- Knee cut"}, {"t": "- Stepping over leg"}]}]}]}]}, {"t": "- Headquarters", "c": [{"t": "- Leg drag", "c": [{"t": "- Side control"}]}, {"t": "- Over/under", "c": [{"t": "- Control points", "c": [{"t": "- Head pressure into hip"}, {"t": "- Straight arms"}]}]}, {"t": "- Smash pass", "c": [{"t": "- Side control"}]}, {"t": "- J point"}, {"t": "- Throwing leg through", "c": [{"t": "- Three quarter mount", "c": [{"t": "- Mount"}]}]}, {"t": "- High tripod"}]}, {"t": "- Closed Guard", "c": [{"t": "- Closed Guard", "c": [{"t": "- Knee through centre"}, {"t": "- Standing ankle grip underhook break", "c": [{"t": "- delariva", "c": [{"t": "- knee too floor"}, {"t": "- smash pass"}]}, {"t": "- k guard", "c": [{"t": "- control leg step out"}, {"t": "- Crab ride shin block"}]}]}, {"t": "- Standing ankle grip push"}]}]}]}, {"title": "Crab ride & Berimibolo", "color": "#34d399", "nodes": [{"t": "- Crab ride & berimbolo", "v": "https://youtu.be/_ZX2QpYZsYY", "c": [{"t": "What is crab ride?", "v": "https://youtu.be/_ZX2QpYZsYY"}, {"t": "What is a berimbolo?"}, {"t": "Entries", "c": [{"t": "Inverted North south"}]}, {"t": "Foundations", "v": "https://youtu.be/fKgXnrPQd-8", "c": [{"t": "Crab x", "v": "https://youtu.be/SeCBJnjZid4", "c": [{"t": "Knee staple", "v": "https://youtu.be/SeCBJnjZid4"}]}, {"t": "- Leg drag", "v": "https://youtu.be/fKgXnrPQd-8"}, {"t": "Hammer down", "v": "https://youtu.be/TcmqIqhDiUA"}, {"t": "- Crab knee wedge", "c": [{"t": "- Back take"}]}, {"t": "- Crab reverse x", "v": "https://youtu.be/qXd_DfldSrY", "c": [{"t": "- Leg drag", "v": "https://youtu.be/qXd_DfldSrY"}, {"t": "Knee staple", "v": "https://youtu.be/qI5yVJIFRwI"}, {"t": "- Hammer down", "c": [{"t": "- Crab knee wedge", "c": [{"t": "- Back take"}]}]}]}, {"t": "- Crab shin wedge", "v": "https://youtu.be/cai4w1F178U", "c": [{"t": "- Invert crab x", "c": [{"t": "- Knee staple", "c": [{"t": "- Side control"}]}, {"t": "- Crab knee wedge", "c": [{"t": "- Back take"}]}]}, {"t": "- Crab shin wedge", "v": "https://youtu.be/cai4w1F178U"}]}, {"t": "- Knee staple", "c": [{"t": "- Side control"}]}, {"t": "- Knee wedge berimbolo", "c": [{"t": "- Back take"}, {"t": "- Reverse half", "c": [{"t": "- Hook far arm", "c": [{"t": "- Roll opponent back through with twister hook", "c": [{"t": "- Back take"}]}, {"t": "- Chair sit for back", "c": [{"t": "- Back take"}]}]}]}, {"t": "- Far arm underhook twister hook back take", "c": [{"t": "- Back take"}]}, {"t": "- Far arm chair sit back take", "c": [{"t": "- Back take"}]}]}, {"t": "- Twister hook battle", "v": "https://youtu.be/RzGu0-anSM4", "c": [{"t": "- Kick through back take", "v": "https://youtu.be/RzGu0-anSM4"}, {"t": "- Rebolo off losing kick through", "v": "https://youtu.be/cYjpcWI_geI"}, {"t": "Double leg counter", "v": "https://youtu.be/GmfoEJ_qebg"}]}]}]}]}];
  const COLORS = ['#e8ff47','#ff6b35','#a78bfa','#47c8ff','#34d399'];
  
  let tx = 0, ty = 0, scale = 1;
  let dragging = false, lastMX, lastMY;
  let initialized = false;

  const NS = 'http://www.w3.org/2000/svg';

  function el(tag, attrs, parent) {
    const e = document.createElementNS(NS, tag);
    for (const [k,v] of Object.entries(attrs||{})) e.setAttribute(k,v);
    if (parent) parent.appendChild(e);
    return e;
  }

  function foreignEl(x, y, w, text, cls, parent) {
    const fo = document.createElementNS(NS, 'foreignObject');
    fo.setAttribute('x', x - w/2);
    fo.setAttribute('y', y - 14);
    fo.setAttribute('width', w);
    fo.setAttribute('height', 40);
    fo.setAttribute('overflow', 'visible');
    const div = document.createElement('div');
    div.className = cls;
    div.textContent = text.replace(/^[-â€¢]\s*/,'');
    fo.appendChild(div);
    parent.appendChild(fo);
    return {fo, div};
  }

  function cubicPath(x1,y1,x2,y2) {
    const dx = Math.abs(x2-x1)*0.5;
    return `M${x1},${y1} C${x1+dx},${y1} ${x2-dx},${y2} ${x2},${y2}`;
  }

  function applyTransform() {
    const g = document.getElementById('cmRoot');
    if (g) g.setAttribute('transform', `translate(${tx},${ty}) scale(${scale})`);
  }

  function countLeaves(node) {
    if (!node.c || node.c.length === 0) return 1;
    return node.c.reduce((s,c) => s + countLeaves(c), 0);
  }

  function drawNode(g, node, x, y, angle, depth, color, parentX, parentY) {
    const isLeaf = !node.c || node.c.length === 0;
    const hasVideo = node.v || node.l;
    const text = node.t.replace(/^[-â€¢]\s*/,'').trim();
    
    // Sizes by depth
    const sizes = [0, 130, 110, 95, 85, 75];
    const w = sizes[Math.min(depth, sizes.length-1)] || 75;
    const h = depth === 1 ? 32 : 22;
    const r = depth === 1 ? 5 : 3;
    const fontSize = depth === 1 ? 12 : depth === 2 ? 10 : 9;

    // Draw curved line from parent
    if (parentX !== undefined) {
      const alpha = depth <= 2 ? 'cc' : depth === 3 ? '99' : '55';
      el('path', {
        d: cubicPath(parentX, parentY, x, y),
        stroke: color + alpha,
        'stroke-width': depth === 1 ? 2 : depth === 2 ? 1.5 : 1,
        fill: 'none'
      }, g);
    }

    // Node box
    const boxG = el('g', {cursor: 'pointer'}, g);
    
    el('rect', {
      x: x - w/2,
      y: y - h/2,
      width: w,
      height: h,
      rx: r,
      fill: depth === 1 ? color + '22' : '#13161e',
      stroke: depth <= 2 ? color : (hasVideo ? '#ff6b35' : '#252b3a'),
      'stroke-width': depth === 1 ? 1.5 : 1
    }, boxG);

    // Text
    const textEl = el('text', {
      x: x,
      y: y + 1,
      'text-anchor': 'middle',
      'dominant-baseline': 'middle',
      fill: depth === 1 ? color : (hasVideo ? '#ff9966' : '#8890a8'),
      'font-size': fontSize,
      'font-family': depth === 1 ? 'Bebas Neue, sans-serif' : 'DM Mono, monospace',
      'letter-spacing': depth === 1 ? '1' : '0',
      'pointer-events': 'none'
    }, boxG);

    // Truncate text
    const maxChars = Math.floor(w / (fontSize * 0.55));
    const displayText = text.length > maxChars ? text.slice(0, maxChars-1) + 'â€¦' : text;
    textEl.textContent = displayText;

    // Video dot
    if (hasVideo) {
      el('circle', {
        cx: x + w/2 - 5,
        cy: y - h/2 + 5,
        r: 3,
        fill: '#ff6b35'
      }, boxG);
    }

    // Hover effect
    boxG.addEventListener('mouseenter', () => {
      boxG.querySelector('rect').setAttribute('stroke-width', depth === 1 ? 2 : 1.5);
      if (depth > 1) boxG.querySelector('rect').setAttribute('stroke', color);
      boxG.querySelector('text').setAttribute('fill', depth === 1 ? color : '#dde1ed');
    });
    boxG.addEventListener('mouseleave', () => {
      boxG.querySelector('rect').setAttribute('stroke-width', depth === 1 ? 1.5 : 1);
      if (depth > 1) boxG.querySelector('rect').setAttribute('stroke', hasVideo ? '#ff6b35' : '#252b3a');
      boxG.querySelector('text').setAttribute('fill', depth === 1 ? color : (hasVideo ? '#ff9966' : '#8890a8'));
    });

    // Click to open in reference
    boxG.addEventListener('click', (e) => {
      e.stopPropagation();
      // Find section index
      let sectionTitle = '';
      DATA.forEach(s => {
        s.nodes.forEach(n => {
          if (n.t === node.t) sectionTitle = s.title;
        });
      });
      switchToReferenceNode(text);
    });

    // Draw children
    if (node.c && node.c.length > 0) {
      const totalLeaves = node.c.reduce((s,c) => s + countLeaves(c), 0);
      const spreadAngle = Math.min(Math.PI * 0.9, node.c.length * 0.35);
      const childDist = depth === 1 ? 170 : depth === 2 ? 140 : 115;
      
      let leafOffset = 0;
      node.c.forEach(child => {
        const leaves = countLeaves(child);
        const childAngle = angle - spreadAngle/2 + (leafOffset + leaves/2) / totalLeaves * spreadAngle;
        leafOffset += leaves;
        
        const cx = x + Math.cos(childAngle) * childDist;
        const cy = y + Math.sin(childAngle) * childDist;
        drawNode(g, child, cx, cy, childAngle, depth+1, color, x, y);
      });
    }
  }

  window.initCustomMap = function() {
    if (initialized) return;
    initialized = true;

    const svg = document.getElementById('cmSvg');
    const wrap = document.getElementById('customMapView');
    const W = wrap.offsetWidth;
    const H = wrap.offsetHeight;
    
    svg.setAttribute('width', W);
    svg.setAttribute('height', H);

    const g = el('g', {id:'cmRoot'}, svg);

    // Centre
    const cx = W/2, cy = H/2;
    tx = 0; ty = 0; scale = 1;

    // Root node
    el('circle', {cx, cy, r:50, fill:'#13161e', stroke:'#e8ff47', 'stroke-width':2}, g);
    const rootText = el('text', {
      x:cx, y:cy,
      'text-anchor':'middle','dominant-baseline':'middle',
      fill:'#e8ff47','font-family':'Bebas Neue,sans-serif','font-size':18,'letter-spacing':3
    }, g);
    rootText.textContent = 'GRAPPLING';

    // Sections radiating out
    const sCount = DATA.length;
    DATA.forEach((section, si) => {
      const angle = (si / sCount) * Math.PI * 2 - Math.PI/2;
      const dist = 220;
      const sx = cx + Math.cos(angle) * dist;
      const sy = cy + Math.sin(angle) * dist;
      const color = COLORS[si % COLORS.length];

      // Root to section line
      el('path', {
        d: cubicPath(cx, cy, sx, sy),
        stroke: color + 'aa',
        'stroke-width': 2.5,
        fill: 'none'
      }, g);

      // Draw section + its children
      drawNode(g, {t: section.title, c: section.nodes, v: null}, sx, sy, angle, 1, color, cx, cy);
    });

    applyTransform();

    // Pan
    const canvas = document.getElementById('customMapView');
    canvas.addEventListener('mousedown', e => {
      dragging = true; lastMX = e.clientX; lastMY = e.clientY;
      canvas.style.cursor = 'grabbing';
    });
    window.addEventListener('mousemove', e => {
      if (!dragging) return;
      tx += e.clientX - lastMX; ty += e.clientY - lastMY;
      lastMX = e.clientX; lastMY = e.clientY;
      applyTransform();
    });
    window.addEventListener('mouseup', () => { dragging = false; canvas.style.cursor = 'default'; });

    // Touch
    canvas.addEventListener('touchstart', e => {
      if (e.touches.length===1) { dragging=true; lastMX=e.touches[0].clientX; lastMY=e.touches[0].clientY; }
    });
    canvas.addEventListener('touchmove', e => {
      if (!dragging||e.touches.length!==1) return;
      e.preventDefault();
      tx+=e.touches[0].clientX-lastMX; ty+=e.touches[0].clientY-lastMY;
      lastMX=e.touches[0].clientX; lastMY=e.touches[0].clientY;
      applyTransform();
    },{passive:false});
    canvas.addEventListener('touchend', ()=>{dragging=false;});

    // Scroll zoom
    canvas.addEventListener('wheel', e => {
      e.preventDefault();
      const rect = canvas.getBoundingClientRect();
      const mx = e.clientX - rect.left;
      const my = e.clientY - rect.top;
      const delta = e.deltaY > 0 ? 0.9 : 1.1;
      const newScale = Math.min(Math.max(scale * delta, 0.15), 4);
      tx = mx - (mx - tx) * (newScale/scale);
      ty = my - (my - ty) * (newScale/scale);
      scale = newScale;
      applyTransform();
    },{passive:false});

    document.getElementById('cmZoomIn').addEventListener('click', () => {
      scale = Math.min(scale*1.25, 4); applyTransform();
    });
    document.getElementById('cmZoomOut').addEventListener('click', () => {
      scale = Math.max(scale*0.8, 0.15); applyTransform();
    });
    document.getElementById('cmReset').addEventListener('click', () => {
      tx=0; ty=0; scale=1; applyTransform();
    });
  };

  function switchToReferenceNode(text) {
    document.querySelectorAll('.view-tab').forEach(t => t.classList.remove('active'));
    document.querySelector('[data-view="reference"]').classList.add('active');
    document.getElementById('customMapView').style.display = 'none';
    document.getElementById('mapView').style.display = 'none';
    document.getElementById('referenceView').style.display = 'block';

    // Expand all and search
    document.querySelectorAll('.section').forEach(s => s.classList.remove('collapsed'));
    document.querySelectorAll('.tree-item').forEach(li => {
      li.classList.remove('collapsed');
      const tog = li.querySelector('.node-toggle');
      if (tog && !tog.classList.contains('leaf')) tog.textContent = 'âˆ’';
    });

    setTimeout(() => {
      let found = null;
      document.querySelectorAll('.node-label').forEach(label => {
        const lt = label.textContent.trim().replace(/^[-â€¢]\s*/,'').toLowerCase();
        const st = text.trim().toLowerCase();
        if (!found && (lt === st || lt.startsWith(st.slice(0,15)))) {
          found = label;
        }
      });
      if (found) {
        found.scrollIntoView({behavior:'smooth', block:'center'});
        found.style.transition = 'background 0.3s';
        found.style.background = 'rgba(232,255,71,0.25)';
        found.style.borderRadius = '3px';
        found.style.padding = '0 4px';
        setTimeout(() => { found.style.background = ''; }, 2500);
      }
    }, 200);
  }

})();

</script>
</body>
</html>
